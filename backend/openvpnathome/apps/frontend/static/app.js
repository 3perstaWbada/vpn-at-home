(function(e){function t(t){for(var i,r,o=t[0],l=t[1],c=t[2],d=0,v=[];d<o.length;d++)r=o[d],s[r]&&v.push(s[r][0]),s[r]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);u&&u(t);while(v.length)v.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],i=!0,o=1;o<n.length;o++){var l=n[o];0!==s[l]&&(i=!1)}i&&(a.splice(t--,1),e=r(r.s=n[0]))}return e}var i={},s={app:0},a=[];function r(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},2152:function(e,t,n){},"21bb":function(e,t,n){"use strict";var i=n("bcc9"),s=n.n(i);s.a},"29d9":function(e,t,n){"use strict";var i=n("6353"),s=n.n(i);s.a},"2b23":function(e,t,n){},"2c4c":function(e,t,n){"use strict";var i=n("3dd2"),s=n.n(i);s.a},"2cfd":function(e,t,n){"use strict";var i=n("e07e"),s=n.n(i);s.a},3114:function(e,t,n){},3323:function(e,t,n){"use strict";var i=n("b3ec"),s=n.n(i);s.a},"35e1":function(e,t,n){"use strict";var i=n("fd74"),s=n.n(i);s.a},"3dd2":function(e,t,n){},4678:function(e,t,n){var i={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(e){var t=a(e);return n(t)}function a(e){var t=i[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}s.keys=function(){return Object.keys(i)},s.resolve=a,e.exports=s,s.id="4678"},5320:function(e,t,n){"use strict";var i=n("8086"),s=n.n(i);s.a},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d"),n("1157"),n("c86c"),n("87ee");var i,s,a=n("2b0e"),r=n("1dce"),o=n.n(r),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[e.$route.meta.noNavbar?e._e():n("NavigationBar",{on:{addClient:e.onClickedAddClient,addServer:e.onClickedAddServer}}),n("div",{staticClass:"ui container"},[n("router-view")],1)],1)},c=[],u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("nav",{staticClass:"ui top fixed menu"},[n("div",{staticClass:"ui container"},[n("router-link",{staticClass:"item",attrs:{"active-class":"active",to:"/",exact:""}},[e._v("Home")]),e.isSuperuser?n("router-link",{staticClass:"item",attrs:{"active-class":"active",to:"/settings",exact:""}},[e._v("Settings")]):e._e(),e.isSuperuser?n("a",{staticClass:"item",attrs:{href:"/admin/"}},[e._v("Admin")]):e._e(),n("div",{staticClass:"right menu"},[e.canAddClient?n("div",{staticClass:"ui item"},[n("div",{staticClass:"ui primary button compact add-button",on:{click:e.onClickedAddClient}},[e._v("Add client")])]):e._e(),e.canAddServer?n("div",{staticClass:"ui item"},[n("div",{staticClass:"ui primary button compact",on:{click:e.onClickedAddServer}},[e._v("Add server")])]):e._e(),n("div",{staticClass:"ui item"},[n("span",{class:{superuser:e.isSuperuser}},[n("b",[e._v(e._s(e.email))])])]),n("div",{staticClass:"ui item no-padding-right"},[n("div",{staticClass:"ui primary button compact negative",on:{click:e.onClickedLogout}},[e._v("Logout")])])])],1)])},d=[],v=(n("7f7f"),n("d4ec")),f=n("bee2"),m=n("99de"),p=n("7e84"),h=n("262e"),g=n("60a3"),b=n("8c4f"),_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("div",{staticClass:"info"},[n("sui-message",{attrs:{info:""}},[e._v("\n                Your SSH deployment key is located in "),n("span",{staticClass:"shell"},[e._v("${DATA_DIR}/ssh/openvpnathome_server_deployment_key.pub")]),e._v("."),n("br"),e._v("\n                Make sure you upload the public key to your target deployment server.\n            ")])],1),e.isSuperuser?n("ConfigList",{attrs:{title:"OpenVPN Servers",items:e.servers,emailEnabled:e.emailEnabled,deploymentEnabled:!0,isServer:!0}}):e._e(),n("ConfigList",{attrs:{title:"OpenVPN Clients",items:e.clients,emailEnabled:e.emailEnabled,deploymentEnabled:!0,isClient:!0}}),n("NewServerDialog",{ref:"newServerDialog"}),n("NewClientDialog",{ref:"newClientDialog"}),n("DeploymentDialog",{ref:"deploymentDialog"}),n("DeleteServerDialog",{ref:"deleteServerDialog"})],1)])},C=[],y=n("257e"),j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"config-table"},[n("table",{staticClass:"ui celled striped table"},[n("col",{attrs:{width:"40%"}}),n("col",{attrs:{width:"15%"}}),n("col",{attrs:{width:"15%"}}),n("col",{attrs:{width:"25%"}}),n("col",{attrs:{width:"5%"}}),n("thead",[n("tr",[n("th",[e._v(e._s(e.title))]),n("th",[e._v("Created")]),n("th",[e._v("Expires")]),n("th",[e._v("E-Mail")]),n("th")])]),n("tbody",e._l(e.items,function(t){return n("ConfigListItem",{key:t.id,attrs:{item:t,emailEnabled:e.emailEnabled,deploymentEnabled:e.deploymentEnabled,isClient:e.isClient,isServer:e.isServer}})}),1)])])},k=[],O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tr",[e.isServer?n("td",[e._v(e._s(e.item.name))]):e.isClient?n("td",[e._v("\n        "+e._s(e.item.name)+" @ "+e._s(e.item.server_name)+"\n    ")]):n("td",[e._v("id:"+e._s(e.item.id))]),n("td",[e._v(e._s(e.relativeCreated))]),n("td",[e._v(e._s(e.relativeValid))]),n("td",[e._v(e._s(e.item.email))]),n("td",{staticClass:"center"},[n("sui-dropdown",{staticClass:"icon",attrs:{icon:"ellipsis vertical"}},[n("sui-dropdown-menu",[n("a",{staticClass:"item",attrs:{href:e.item.download_url}},[n("sui-icon",{attrs:{name:"download"}}),e._v("Download config\n                ")],1),e.emailEnabled&&e.canSendEmail&&e.isClient?n("sui-dropdown-item",{on:{click:e.onSendMailClicked}},[n("sui-icon",{attrs:{name:"mail"}}),e._v("Send via e-mail\n                ")],1):e._e(),e.deploymentEnabled&&e.canDeploy?n("sui-dropdown-item",{on:{click:e.onDeployClicked}},[n("sui-icon",{attrs:{name:"play"}}),e._v("Deploy to server\n                ")],1):e._e(),e.isServer?n("sui-dropdown-item",{on:{click:e.onDeleteClicked}},[n("sui-icon",{attrs:{name:"trash"}}),e._v("Delete\n                ")],1):e._e()],1)],1)],1)])},w=[],S=n("c1df"),$=n.n(S),E=n("2ef0"),x=n.n(E),D="clicked_add_client",N="clicked_add_server",A="clicked_deploy_server",P="clicked_delete_server",R=(i=Object(g["a"])({name:"ConfigListItem",props:["item","emailEnabled","deploymentEnabled","isClient","isServer"]}),i(s=function(e){function t(){return Object(v["a"])(this,t),Object(m["a"])(this,Object(p["a"])(t).apply(this,arguments))}return Object(h["a"])(t,e),Object(f["a"])(t,[{key:"onSendMailClicked",value:function(){this.$store.dispatch("sendClientConfigEmail",this.item.id)}},{key:"onDeployClicked",value:function(){this.$root.$emit(A,this.item)}},{key:"onDeleteClicked",value:function(){this.$root.$emit(P,this.item)}},{key:"relativeCreated",get:function(){return $()(this.item.created).fromNow()}},{key:"relativeValid",get:function(){return $()(this.item.validity_end).fromNow()}},{key:"isSending",get:function(){return this.$store.getters.isSendingClientConfigEmail(this.item.id)}},{key:"canSendEmail",get:function(){return this.$store.getters.canSendEmail(this.item.email)}},{key:"canDeploy",get:function(){return x.a.has(this.item,"network")}}]),t}(g["b"]))||s),F=R,V=(n("b007"),n("2877")),z=Object(V["a"])(F,O,w,!1,null,"b732f2ca",null);z.options.__file="ConfigListItem.vue";var L,q,M=z.exports,T=(L=Object(g["a"])({name:"ConfigList",props:["items","title","emailEnabled","deploymentEnabled","isClient","isServer"],components:{ConfigListItem:M}}),L(q=function(e){function t(){return Object(v["a"])(this,t),Object(m["a"])(this,Object(p["a"])(t).apply(this,arguments))}return Object(h["a"])(t,e),t}(g["b"]))||q),U=T,I=(n("35e1"),Object(V["a"])(U,j,k,!1,null,"4593fcfb",null));I.options.__file="ConfigList.vue";var H=I.exports,Y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("sui-modal",{attrs:{closable:!1},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[n("sui-modal-header",[e._v("New OpenVPN Server")]),n("sui-modal-content",[n("sui-container",[e.open?n("NewServerForm",{ref:"form",on:{formUpdated:e.onFormUpdated}}):e._e()],1)],1),n("sui-modal-actions",[n("sui-button",{attrs:{floated:"right",compact:"",positive:"",disabled:!e.isValid},on:{click:e.onAccept}},[e._v("OK")]),n("sui-button",{attrs:{floated:"right",compact:"",negative:""},on:{click:e.onReject}},[e._v("Cancel")])],1)],1)],1)},J=[],B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ui form"},[n("div",{staticClass:"field"},[n("label",[e._v("Server Name")]),n("div",{staticClass:"ui left icon input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.name,expression:"form.name"}],attrs:{placeholder:"Ex. 'My Home Server'",type:"text"},domProps:{value:e.form.name},on:{input:function(t){t.target.composing||e.$set(e.form,"name",t.target.value)}}}),n("i",{staticClass:"server icon",attrs:{"aria-hidden":"true"}})])]),n("div",{staticClass:"fields"},[n("div",{staticClass:"twelve wide field"},[n("label",[e._v("Server Host Address")]),n("div",{staticClass:"ui left icon input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.hostname,expression:"form.hostname"}],attrs:{placeholder:"Ex. myvpn.net or 192.168.1.1",type:"text"},domProps:{value:e.form.hostname},on:{input:function(t){t.target.composing||e.$set(e.form,"hostname",t.target.value)}}}),n("i",{staticClass:"server icon",attrs:{"aria-hidden":"true"}})])]),n("div",{staticClass:"four wide field"},[n("label",[e._v("Port")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.port,expression:"form.port"}],attrs:{min:"1",max:"65535",type:"number"},domProps:{value:e.form.port},on:{input:function(t){t.target.composing||e.$set(e.form,"port",t.target.value)}}})])]),n("div",{staticClass:"field"},[n("label",[e._v("Transport Protocol")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.form.protocol,expression:"form.protocol"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.form,"protocol",t.target.multiple?n:n[0])}}},[n("option",{attrs:{value:"udp"}},[e._v("UDP")]),n("option",{attrs:{value:"tcp"}},[e._v("TCP")])])]),n("div",{staticClass:"field"},[n("label",[e._v("Internal VPN network (private IP range, CIDR notation)")]),n("div",{staticClass:"ui left icon input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.network,expression:"form.network"}],attrs:{placeholder:"Ex. 172.30.0.0/16",type:"text"},domProps:{value:e.form.network},on:{input:function(t){t.target.composing||e.$set(e.form,"network",t.target.value)}}}),n("i",{staticClass:"server icon",attrs:{"aria-hidden":"true"}})])])])},K=[],W=n("be94"),X=n("b5ae"),G={name:"NewServerForm",data:function(){return{open:!1,form:{name:"",hostname:"",port:1194,protocol:"udp",network:"172.30.0.0/16"}}},validations:{form:{name:{required:X["required"]},hostname:{required:X["required"]},port:{required:X["required"]},protocol:{required:X["required"]},network:{required:X["required"]}}},computed:{isValid:function(){return!this.$v.$invalid},value:function(){return Object(W["a"])({},this.form)}},mounted:function(){var e=this;this.$emit("formUpdated",this.isValid),this.$watch("isValid",function(){e.$emit("formUpdated",e.isValid)})}},Q=G,Z=(n("5c4a"),Object(V["a"])(Q,B,K,!1,null,"67650fbd",null));Z.options.__file="NewServerForm.vue";var ee,te,ne=Z.exports,ie=(ee=Object(g["a"])({components:{NewServerForm:ne},data:function(){return{open:!1,isValid:!1}}}),ee(te=function(e){function t(){return Object(v["a"])(this,t),Object(m["a"])(this,Object(p["a"])(t).apply(this,arguments))}return Object(h["a"])(t,e),Object(f["a"])(t,[{key:"toggle",value:function(){this.open=!0}},{key:"onFormUpdated",value:function(e){console.log("NewServerDialog.onFormReadyChanged()",e),this.isValid=e}},{key:"onAccept",value:function(){this.$store.dispatch("addServer",this.$refs.form.value),this.open=!1}},{key:"onReject",value:function(){console.log("onReject()"),this.open=!1}}]),t}(g["b"]))||te),se=ie,ae=(n("edb5"),Object(V["a"])(se,Y,J,!1,null,"19ce6608",null));ae.options.__file="NewServerDialog.vue";var re=ae.exports,oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("sui-modal",{attrs:{closable:!1},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[n("sui-modal-header",[e._v("New OpenVPN Client")]),n("sui-modal-content",[n("sui-container",[e.open?n("NewClientForm",{ref:"form",attrs:{servers:e.servers},on:{formUpdated:e.onFormUpdated}}):e._e()],1)],1),n("sui-modal-actions",[n("sui-button",{attrs:{floated:"right",compact:"",positive:"",disabled:!e.isValid},on:{click:e.onAccept}},[e._v("OK")]),n("sui-button",{attrs:{floated:"right",compact:"",negative:""},on:{click:e.onReject}},[e._v("Cancel")])],1)],1)],1)},le=[],ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ui form"},[n("div",{staticClass:"field"},[n("label",[e._v("Server")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.form.server,expression:"form.server"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.form,"server",t.target.multiple?n:n[0])}}},e._l(e.servers,function(t){return n("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])}),0)]),n("div",{staticClass:"field"},[n("label",[e._v("Client Name")]),n("div",{staticClass:"ui left icon input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.name,expression:"form.name"}],attrs:{placeholder:"Ex. 'My Home Server'",type:"text"},domProps:{value:e.form.name},on:{input:function(t){t.target.composing||e.$set(e.form,"name",t.target.value)}}}),n("i",{staticClass:"server icon",attrs:{"aria-hidden":"true"}})])])])},ue=[],de={name:"NewClientForm",props:{servers:Array},data:function(){return{open:!1,form:{name:"",server:this.servers[0].id}}},validations:{form:{name:{required:X["required"]}}},computed:{isValid:function(){return!this.$v.$invalid},value:function(){return Object(W["a"])({},this.form)}},mounted:function(){var e=this;this.$emit("formUpdated",this.isValid),this.$watch("isValid",function(){e.$emit("formUpdated",e.isValid)})}},ve=de,fe=(n("c8be"),Object(V["a"])(ve,ce,ue,!1,null,"480e2c9c",null));fe.options.__file="NewClientForm.vue";var me,pe,he=fe.exports,ge=(me=Object(g["a"])({components:{NewClientForm:he},data:function(){return{open:!1,isValid:!1}}}),me(pe=function(e){function t(){return Object(v["a"])(this,t),Object(m["a"])(this,Object(p["a"])(t).apply(this,arguments))}return Object(h["a"])(t,e),Object(f["a"])(t,[{key:"toggle",value:function(){this.open=!0}},{key:"onFormUpdated",value:function(e){this.isValid=e}},{key:"onAccept",value:function(){this.$store.dispatch("addClient",this.$refs.form.value),this.open=!1}},{key:"onReject",value:function(){this.open=!1}},{key:"servers",get:function(){return this.$store.state.servers}}]),t}(g["b"]))||pe),be=ge,_e=(n("2c4c"),Object(V["a"])(be,oe,le,!1,null,"27b67c94",null));_e.options.__file="NewClientDialog.vue";var Ce,ye,je=_e.exports,ke=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("sui-modal",{attrs:{closable:!1},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[n("sui-modal-header",[e._v("Deploy OpenVPN server")]),n("sui-modal-content",{attrs:{scrolling:""}},[n("sui-container",[n("div",{staticClass:"output"},e._l(e.output,function(t,i){return n("div",{key:i},[e._v(e._s(t))])}),0)])],1),n("sui-modal-actions",[n("sui-button",{attrs:{floated:"right",compact:"",positive:"",loading:e.isRunning,disabled:e.isRunning},on:{click:e.onDeploy}},[e._v("Deploy")]),e.finished?n("sui-button",{attrs:{floated:"right",compact:"",negative:""},on:{click:e.onReject}},[e._v("Close")]):n("sui-button",{attrs:{floated:"right",compact:"",negative:""},on:{click:e.onReject}},[e._v("Cancel")])],1)],1)],1)},Oe=[],we=n("2909"),Se=function(e){return new WebSocket(e)},$e=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Se;Object(v["a"])(this,e),this.output=[],this.createSocket=n,this.socket=null,this.onStart=null,this.onOutput=null,this.onFinish=null,this.hostname=t}return Object(f["a"])(e,[{key:"connect",value:function(e){if(null!=this.socket)throw Error("Already connected");this.socket=this.createSocket(e),this.socket.onopen=this._onOpen.bind(this),this.socket.onmessage=this._onMessage.bind(this),this.socket.onclose=this._onClose.bind(this),this.socket.onerror=this._onError.bind(this)}},{key:"close",value:function(){this.socket&&this.socket.close()}},{key:"_onOpen",value:function(){var e={cmd:"start",args:{hostname:this.hostname}};this._sendJson(e)}},{key:"_onMessage",value:function(e){var t=JSON.parse(e.data);"running"===t.status&&t.output&&this.onOutput?this.onOutput(t.output):"start"===t.status&&this.onStart?this.onStart():"finish"===t.status&&this.onFinish?this.onFinish():console.log("_onMessage(): unknown message",t)}},{key:"_onClose",value:function(){}},{key:"_onError",value:function(){}},{key:"_sendJson",value:function(e){var t=JSON.stringify(e);this.socket.send(t)}}]),e}(),Ee=(Ce=Object(g["a"])({data:function(){return{isRunning:!1,finished:!1,open:!1,output:[]}}}),Ce(ye=function(e){function t(){return Object(v["a"])(this,t),Object(m["a"])(this,Object(p["a"])(t).apply(this,arguments))}return Object(h["a"])(t,e),Object(f["a"])(t,[{key:"show",value:function(e){this.isRunning=!1,this.output=[],this.process=null,this.server=e,this.open=!0}},{key:"onDeploy",value:function(){this.process=new $e(this.server.hostname),this.process.onStart=this.onStart,this.process.onFinish=this.onFinish,this.process.onOutput=this.onOutput,this.process.connect("ws://".concat(window.location.host,"/ws/")),this.isRunning=!0,this.finished=!1}},{key:"onReject",value:function(){this.open=!1,this.process&&this.process.close()}},{key:"onStart",value:function(){console.log("onStart()"),this.output.push("Deployment started","Ignore first '[ERROR]:' line - this is harmless Ansible bug. :o)")}},{key:"onFinish",value:function(){console.log("onStop()"),this.output.push("Deployment finished."),this.isRunning=!1,this.finished=!0}},{key:"onOutput",value:function(e){var t;(t=this.output).push.apply(t,Object(we["a"])(e))}}]),t}(g["b"]))||ye),xe=Ee,De=(n("ab93"),Object(V["a"])(xe,ke,Oe,!1,null,"19778517",null));De.options.__file="DeploymentDialog.vue";var Ne,Ae,Pe=De.exports,Re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("sui-modal",{staticClass:"kurwix",attrs:{closable:!1},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[n("sui-modal-header",[e._v("Delete server?")]),n("sui-modal-content",[n("sui-container",[n("div",[e._v("\n                    Delete server "),n("b",[e._v(e._s(e.server.name)+" - "+e._s(e.server.hostname))]),e._v("? This will also delete all associated clients.\n                ")])])],1),n("sui-modal-actions",[n("sui-button",{attrs:{floated:"right",compact:"",positive:""},on:{click:e.onAccept}},[e._v("OK")]),n("sui-button",{attrs:{floated:"right",compact:"",negative:""},on:{click:e.onReject}},[e._v("Cancel")])],1)],1)],1)},Fe=[],Ve=(Ne=Object(g["a"])({data:function(){return{server:{},open:!1}}}),Ne(Ae=function(e){function t(){return Object(v["a"])(this,t),Object(m["a"])(this,Object(p["a"])(t).apply(this,arguments))}return Object(h["a"])(t,e),Object(f["a"])(t,[{key:"show",value:function(e){this.server=e,this.open=!0}},{key:"onAccept",value:function(){this.open=!1,this.$store.dispatch("deleteServer",this.server)}},{key:"onReject",value:function(){this.open=!1}}]),t}(g["b"]))||Ae),ze=Ve,Le=(n("6c11"),Object(V["a"])(ze,Re,Fe,!1,null,"0cf625a0",null));Le.options.__file="DeleteServerDialog.vue";var qe,Me,Te=Le.exports,Ue=(qe=Object(g["a"])({name:"Home",components:{NavigationBar:Wt,ConfigList:H,NewServerDialog:re,NewClientDialog:je,DeploymentDialog:Pe,DeleteServerDialog:Te}}),qe(Me=function(e){function t(){var e;return Object(v["a"])(this,t),e=Object(m["a"])(this,Object(p["a"])(t).call(this)),e.onClickedAddClient=e.onClickedAddClient.bind(Object(y["a"])(Object(y["a"])(e))),e.onClickedAddServer=e.onClickedAddServer.bind(Object(y["a"])(Object(y["a"])(e))),e.onClickedDeployServer=e.onClickedDeployServer.bind(Object(y["a"])(Object(y["a"])(e))),e}return Object(h["a"])(t,e),Object(f["a"])(t,[{key:"onClickedAddClient",value:function(){this.$refs.newClientDialog.open=!0}},{key:"onClickedAddServer",value:function(){this.$refs.newServerDialog.open=!0}},{key:"onClickedDeployServer",value:function(e){this.$refs.deploymentDialog.show(e)}},{key:"onClickedDeleteServer",value:function(e){this.$refs.deleteServerDialog.show(e)}},{key:"mounted",value:function(){this.$root.$on(D,this.onClickedAddClient),this.$root.$on(N,this.onClickedAddServer),this.$root.$on(A,this.onClickedDeployServer),this.$root.$on(P,this.onClickedDeleteServer)}},{key:"beforeDestroy",value:function(){this.$root.$off(D,this.onClickedAddClient),this.$root.$off(N,this.onClickedAddServer),this.$root.$off(A,this.onClickedDeployServer),this.$root.$off(P,this.onClickedDeleteServer)}},{key:"servers",get:function(){return this.$store.state.servers}},{key:"clients",get:function(){return this.$store.state.clients}},{key:"isSuperuser",get:function(){return this.$store.getters.isSuperuser}},{key:"emailEnabled",get:function(){return this.$store.state.settings.email_enabled}}]),t}(g["b"]))||Me),Ie=Ue,He=(n("21bb"),Object(V["a"])(Ie,_,C,!1,null,null,null));He.options.__file="Home.vue";var Ye,Je,Be=He.exports,Ke=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"settings"},[n("div",{staticClass:"ui container text",staticStyle:{margin:"16px"}},[n("form",{staticClass:"ui form",on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[n("div",{staticClass:"ui fluid card"},[n("div",{staticClass:"content"},[n("div",{staticClass:"field"},[n("div",{staticClass:"ui checked checkbox"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.settings.email_enabled,expression:"settings.email_enabled"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.settings.email_enabled)?e._i(e.settings.email_enabled,null)>-1:e.settings.email_enabled},on:{change:function(t){var n=e.settings.email_enabled,i=t.target,s=!!i.checked;if(Array.isArray(n)){var a=null,r=e._i(n,a);i.checked?r<0&&e.$set(e.settings,"email_enabled",n.concat([a])):r>-1&&e.$set(e.settings,"email_enabled",n.slice(0,r).concat(n.slice(r+1)))}else e.$set(e.settings,"email_enabled",s)}}}),n("label",[e._v("Enable e-mail")])])]),e.settings.email_enabled?n("div",[n("div",{staticClass:"field"},[n("label",[e._v("From e-mail")]),n("div",{staticClass:"ui left icon input disabled"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.readOnly.email_from,expression:"readOnly.email_from"}],key:"email_from",attrs:{placeholder:"From for automated e-mails sent by this system",type:"text"},domProps:{value:e.readOnly.email_from},on:{input:function(t){t.target.composing||e.$set(e.readOnly,"email_from",t.target.value)}}}),n("i",{staticClass:"user icon",attrs:{"aria-hidden":"true"}})])]),n("div",{staticClass:"fields"},[n("div",{staticClass:"twelve wide field"},[n("label",[e._v("SMTP server (only with TLS support)")]),n("div",{staticClass:"ui left icon input disabled"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.readOnly.email_smtp_server,expression:"readOnly.email_smtp_server"}],attrs:{placeholder:"Outgoing SMTP server",type:"text"},domProps:{value:e.readOnly.email_smtp_server},on:{input:function(t){t.target.composing||e.$set(e.readOnly,"email_smtp_server",t.target.value)}}}),n("i",{staticClass:"server icon",attrs:{"aria-hidden":"true"}})])]),n("div",{staticClass:"four wide field"},[n("label",[e._v("Port")]),n("div",{staticClass:"ui left icon input disabled"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.readOnly.email_smtp_port,expression:"readOnly.email_smtp_port"}],attrs:{placeholder:"Outgoing SMTP server port",min:"1",max:"65535",type:"number"},domProps:{value:e.readOnly.email_smtp_port},on:{input:function(t){t.target.composing||e.$set(e.readOnly,"email_smtp_port",t.target.value)}}}),n("i",{staticClass:"lock icon",attrs:{"aria-hidden":"true"}})])])]),n("div",{staticClass:"field"},[n("label",[e._v("SMTP login")]),n("div",{staticClass:"ui left icon input disabled"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.readOnly.email_smtp_login,expression:"readOnly.email_smtp_login"}],attrs:{placeholder:"Outgoing SMTP server login (e-mail address)",type:"text"},domProps:{value:e.readOnly.email_smtp_login},on:{input:function(t){t.target.composing||e.$set(e.readOnly,"email_smtp_login",t.target.value)}}}),n("i",{staticClass:"user icon",attrs:{"aria-hidden":"true"}})])]),e._m(0)]):e._e()])]),n("div",{staticClass:"ui fluid card"},[n("div",{staticClass:"content"},[n("div",{staticClass:"field"},[n("div",{staticClass:"ui checkbox"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.settings.registration_enabled,expression:"settings.registration_enabled"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.settings.registration_enabled)?e._i(e.settings.registration_enabled,null)>-1:e.settings.registration_enabled},on:{change:function(t){var n=e.settings.registration_enabled,i=t.target,s=!!i.checked;if(Array.isArray(n)){var a=null,r=e._i(n,a);i.checked?r<0&&e.$set(e.settings,"registration_enabled",n.concat([a])):r>-1&&e.$set(e.settings,"registration_enabled",n.slice(0,r).concat(n.slice(r+1)))}else e.$set(e.settings,"registration_enabled",s)}}}),n("label",[e._v("New users registration")])])])])]),n("button",{staticClass:"ui button",attrs:{type:"submit",role:"button",disabled:!e.isValid},on:{submit:function(e){}}},[e._v("Submit")]),"error"===e.status?n("span",{staticClass:"ui red header"},[n("i",{staticClass:"times icon",attrs:{"aria-hidden":"true"}}),e._v(" Update failed")]):e._e(),"success"===e.status?n("span",{staticClass:"ui green header"},[n("i",{staticClass:"check icon",attrs:{"aria-hidden":"true"}}),e._v(" Settings updated")]):e._e()])])])},We=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"field"},[n("label",[e._v("SMTP password (hidden)")]),n("div",{staticClass:"ui left icon input disabled"},[n("input",{attrs:{value:"See settings.json",type:"text"}}),n("i",{staticClass:"lock icon",attrs:{"aria-hidden":"true"}})])])}],Xe=n("ade3"),Ge=(Ye=Object(g["a"])({name:"Settings",components:{NavigationBar:Wt},validations:function(){var e={registration_enabled:{required:X["required"]}};return{settings:e}}}),Ye(Je=function(e){function t(){var e,n;Object(v["a"])(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=Object(m["a"])(this,(e=Object(p["a"])(t)).call.apply(e,[this].concat(s))),Object(Xe["a"])(Object(y["a"])(Object(y["a"])(n)),"settings",{email_enabled:!1,registration_enabled:!1}),Object(Xe["a"])(Object(y["a"])(Object(y["a"])(n)),"readOnly",{email_from:"some@email.com",email_smtp_server:"some.server.com",email_smtp_port:465,email_smtp_login:"some@login.com",email_smtp_password:"not visibles"}),Object(Xe["a"])(Object(y["a"])(Object(y["a"])(n)),"status",null),n}return Object(h["a"])(t,e),Object(f["a"])(t,[{key:"handleSubmit",value:function(){this.$store.dispatch("setSettings",this.settings)}},{key:"onSuccess",value:function(){this.status="success"}},{key:"onError",value:function(){this.status="error"}},{key:"mounted",value:function(){this.settings=x.a.cloneDeep(this.$store.state.settings),this.readOnly=x.a.cloneDeep(this.$store.state.settings)}},{key:"isValid",get:function(){return!this.$v.$invalid}}]),t}(g["b"]))||Je),Qe=Ge,Ze=(n("5320"),Object(V["a"])(Qe,Ke,We,!1,null,"e8c6dd34",null));Ze.options.__file="Settings.vue";var et,tt,nt=Ze.exports,it=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login top-space"},[n("div",{staticClass:"ui grid center aligned"},[e._m(0),n("div",{staticClass:"row"},[n("div",{staticClass:"six wide column left aligned"},[n("form",{staticClass:"ui form",on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[n("div",{staticClass:"field"},[n("label",[e._v("Login E-mail")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.login,expression:"login"}],attrs:{type:"email",name:"login",placeholder:"E-mail"},domProps:{value:e.login},on:{input:function(t){t.target.composing||(e.login=t.target.value)}}})]),n("div",{staticClass:"field"},[n("label",{},[e._v("Password")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",name:"password",placeholder:"Password (min 8 chars)"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),n("button",{staticClass:"ui button",attrs:{disabled:e.invalid}},[e._v("Login")])])])]),e.canRegister?n("div",{staticClass:"row center aligned"},[n("router-link",{attrs:{to:"/register"}},[e._v("Register")])],1):e._e(),e.error?n("div",{staticClass:"row center aligned"},[e._v("\n            Login failed\n        ")]):e._e()])])},st=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row center aligned"},[n("h1",{staticClass:"ui header green center aligned"},[e._v("Login"),n("br"),e._v("OpenVPN@Home")])])}],at=(et=Object(g["a"])({components:{},validations:{login:{required:X["required"]},password:{required:X["required"],minLength:Object(X["minLength"])(8)}}}),et(tt=function(e){function t(){var e,n;Object(v["a"])(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=Object(m["a"])(this,(e=Object(p["a"])(t)).call.apply(e,[this].concat(s))),Object(Xe["a"])(Object(y["a"])(Object(y["a"])(n)),"login",""),Object(Xe["a"])(Object(y["a"])(Object(y["a"])(n)),"password",""),Object(Xe["a"])(Object(y["a"])(Object(y["a"])(n)),"error",!1),n}return Object(h["a"])(t,e),Object(f["a"])(t,[{key:"handleSubmit",value:function(){var e=this;this.$api.login(this.login,this.password,function(){e.$store.commit("login"),e.$store.dispatch("hydrate"),e.$router.push("/")},function(){e.error=!0})}},{key:"invalid",get:function(){return this.$v.$invalid}},{key:"canRegister",get:function(){return this.$store.getters.canRegister}}]),t}(g["b"]))||tt),rt=at,ot=(n("d6db"),Object(V["a"])(rt,it,st,!1,null,null,null));ot.options.__file="Login.vue";var lt,ct,ut=ot.exports,dt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login top-space"},[n("div",{staticClass:"ui grid center aligned"},[e._m(0),n("div",{staticClass:"row"},[n("div",{staticClass:"six wide column left aligned"},[n("form",{staticClass:"ui form",on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[n("div",{staticClass:"field"},[n("label",[e._v("Registration E-mail")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.login,expression:"login"}],attrs:{type:"email",name:"login",placeholder:"E-mail"},domProps:{value:e.login},on:{input:function(t){t.target.composing||(e.login=t.target.value)}}})]),n("div",{staticClass:"field"},[n("label",{},[e._v("Password")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",name:"password",placeholder:"Password (min 8 chars)"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),n("button",{staticClass:"ui button",attrs:{disabled:e.invalid}},[e._v("Register")])])])]),n("div",{staticClass:"row center aligned"},[n("router-link",{attrs:{to:"/login"}},[e._v("Login")])],1),e.error?n("div",{staticClass:"row center aligned"},[e._v("\n            Registration failed\n        ")]):e._e()])])},vt=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row center aligned"},[n("h1",{staticClass:"ui header green center aligned"},[e._v("Register"),n("br"),e._v("OpenVPN@Home")])])}],ft=(lt=Object(g["a"])({components:{},validations:{login:{required:X["required"],email:X["email"]},password:{required:X["required"],minLength:Object(X["minLength"])(8)}}}),lt(ct=function(e){function t(){var e,n;Object(v["a"])(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=Object(m["a"])(this,(e=Object(p["a"])(t)).call.apply(e,[this].concat(s))),Object(Xe["a"])(Object(y["a"])(Object(y["a"])(n)),"login",""),Object(Xe["a"])(Object(y["a"])(Object(y["a"])(n)),"password",""),Object(Xe["a"])(Object(y["a"])(Object(y["a"])(n)),"error",!1),n}return Object(h["a"])(t,e),Object(f["a"])(t,[{key:"handleSubmit",value:function(){var e=this;this.$api.register(this.login,this.password,function(){e.$store.commit("login"),e.$store.dispatch("hydrate"),e.$router.push("/")},function(){e.error=!0})}},{key:"invalid",get:function(){return this.$v.$invalid}}]),t}(g["b"]))||ct),mt=ft,pt=(n("2cfd"),Object(V["a"])(mt,dt,vt,!1,null,null,null));pt.options.__file="Register.vue";var ht=pt.exports,gt=(n("6762"),n("2fdb"),n("2f62")),bt=n("bc3a"),_t=n.n(bt),Ct=n("a78e"),yt=n.n(Ct),jt="/api/accounts/login/",kt="/api/accounts/register/",Ot="/api/accounts/user/",wt="/api/accounts/logout/",St="/api/openvpn/servers/",$t="/api/openvpn/clients/",Et="/api/management/settings/",xt=function(){function e(){Object(v["a"])(this,e)}return Object(f["a"])(e,[{key:"login",value:function(e,t,n,i){this.client().post(jt,{email:e,password:t}).then(function(e){n()},function(e){i()})}},{key:"register",value:function(e,t,n,i){this.client().post(kt,{email:e,password:t}).then(function(e){n()},function(e){i()})}},{key:"logout",value:function(e){this.client().get(wt).then(function(t){e()})}},{key:"getUser",value:function(e,t){this.client().get(Ot).then(function(t){return e(t.data)},function(e){return t()})}},{key:"getServers",value:function(e,t){this.client().get(St).then(function(t){e(t.data)},function(e){t()})}},{key:"addServer",value:function(e,t,n){this.client().post(St,e).then(function(e){return t(e.data)},function(e){return n()})}},{key:"deleteServer",value:function(e,t,n){this.client().delete("/api/openvpn/servers/".concat(e.id,"/")).then(function(e){return t(e.data)},function(e){return n()})}},{key:"getClients",value:function(e,t){this.client().get($t).then(function(t){e(t.data)},function(e){t()})}},{key:"addClient",value:function(e,t,n){var i="/api/openvpn/servers/".concat(e.server,"/clients/");this.client().post(i,e).then(function(e){return t(e.data)},function(e){return n()})}},{key:"getSettings",value:function(e,t){this.client().get(Et).then(function(t){e(t.data)},function(e){t()})}},{key:"setSettings",value:function(e,t,n){this.client().patch(Et,e).then(function(e){t()},function(e){n()})}},{key:"sendClientConfig",value:function(e,t,n){var i="/api/openvpn/clients/".concat(e,"/send/");this.client().post(i,{}).then(function(n){return t(e)},function(t){return n(e)})}},{key:"client",value:function(){var e=yt.a.get("csrftoken");return _t.a.create({headers:{"X-CSRFToken":e}})}}]),e}();function Dt(e){e.prototype.$api=new xt(zt)}a["default"].use(gt["a"]);var Nt=new xt,At={user:{authenticated:window.django.authenticated,email:"",permissions:[],superuser:!1},servers:[],clients:[],status:{sendingClientConfigEmail:[],sendingServerConfigEmail:[],appNotReady:window.django.app_not_ready},settings:{email_enabled:window.django.email_enabled,registration_enabled:window.django.registration_enabled}},Pt={canRegister:function(e){return e.settings.registration_enabled},hasServer:function(e){return e.servers.length>0},isAuthenticated:function(e){return e.user.authenticated},isSuperuser:function(e){return e.user.superuser},hasPermission:function(e){return function(t){return x.a.includes(e.user.permissions,t)}},isSendingClientConfigEmail:function(e){return function(t){return x.a.includes(e.status.sendingClientConfigEmail,t)}},email:function(e){return e.user.email},canSendEmail:function(e){var t=e.settings,n=e.user;return function(e){return t.email_enabled&&(e===n.email||n.superuser)}}},Rt={login:function(e){e.user.authenticated=!0},logout:function(e){var t=x.a.cloneDeep(At);x.a.assign(e,t)},loginError:function(e){e.auth.error="Error"},setUser:function(e,t){e.user.email=t.email,e.user.permissions=t.permissions,e.user.superuser=x.a.includes(t.permissions,"superuser")},setServers:function(e,t){e.servers=t},addServer:function(e,t){e.servers.push(t)},deleteServer:function(e,t){e.servers=x.a.filter(e.servers,function(e){return e.id!==t.id})},setClients:function(e,t){e.clients=t},addClient:function(e,t){e.clients.push(t)},setSendingClientConfigEmail:function(e,t){e.status.sendingClientConfigEmail.push(t)},clearSendingClientConfigEmail:function(e,t){e.status.sendingClientConfigEmail=x.a.filter(e.status.sendingClientConfigEmail,function(e){return e!==t})},setSettings:function(e,t){e.settings=t}},Ft={hydrate:function(e){var t=e.dispatch;t("getSettings"),t("getUser"),t("getServers"),t("getClients")},getUser:function(e){var t=e.commit;Nt.getUser(function(e){return t("setUser",e)},function(e){})},getServers:function(e){var t=e.commit;Nt.getServers(function(e){return t("setServers",e)},function(e){})},getClients:function(e){var t=e.commit;Nt.getClients(function(e){return t("setClients",e)},function(e){})},addServer:function(e,t){var n=e.commit;Nt.addServer(t,function(e){return n("addServer",e)},function(e){})},deleteServer:function(e,t){var n=e.dispatch;Nt.deleteServer(t,function(e){n("getServers"),n("getClients")},function(e){})},addClient:function(e,t){var n=e.commit;Nt.addClient(t,function(e){return n("addClient",e)},function(e){})},sendClientConfigEmail:function(e,t){var n=e.commit;n("setSendingClientConfigEmail",t),Nt.sendClientConfig(t,function(e){return n("clearSendingClientConfigEmail",e)},function(e){return n("clearSendingClientConfigEmail",e)})},setSettings:function(e,t){var n=e.commit;Nt.setSettings(t,function(e){return n("setSettings",t)},function(e){})},getSettings:function(e){var t=e.commit;Nt.getSettings(function(e){return t("setSettings",e)},function(e){})}},Vt=new gt["a"].Store({state:x.a.cloneDeep(At),getters:Pt,mutations:Rt,actions:Ft}),zt=Vt;a["default"].use(b["a"]);var Lt="login",qt="register",Mt="home",Tt="settings",Ut=new b["a"]({routes:[{path:"/",name:Mt,component:Be},{path:"/login",name:Lt,component:ut,meta:{isPublic:!0,noNavbar:!0}},{path:"/register",name:qt,component:ht,meta:{isPublic:!0,noNavbar:!0}},{path:"/settings",name:Tt,component:nt}]});Ut.beforeEach(function(e,t,n){var i=!zt.getters.isAuthenticated&&!e.meta.isPublic;i?n({path:"/login"}):n()});var It,Ht,Yt=Ut,Jt=(It=Object(g["a"])({name:"NavigationBar",components:{}}),It(Ht=function(e){function t(){return Object(v["a"])(this,t),Object(m["a"])(this,Object(p["a"])(t).apply(this,arguments))}return Object(h["a"])(t,e),Object(f["a"])(t,[{key:"onClickedLogout",value:function(){this.$api.logout(this.onLogoutCompleted.bind(this))}},{key:"onClickedAddClient",value:function(){this.$root.$emit(D)}},{key:"onClickedAddServer",value:function(){this.$root.$emit(N)}},{key:"onLogoutCompleted",value:function(){this.$store.commit("logout"),this.$router.push({path:"/login"})}},{key:"canAddServer",get:function(){return this.$route.name===Mt}},{key:"canAddClient",get:function(){return this.$route.name===Mt&&this.$store.getters.hasServer}},{key:"isSuperuser",get:function(){return this.$store.getters.isSuperuser}},{key:"email",get:function(){return this.$store.state.user.email}}]),t}(g["b"]))||Ht),Bt=Jt,Kt=(n("3323"),Object(V["a"])(Bt,u,d,!1,null,"279710fe",null));Kt.options.__file="NavigationBar.vue";var Wt=Kt.exports,Xt={components:{NavigationBar:Wt},created:function(){this.$store.getters.isAuthenticated&&this.$store.dispatch("hydrate")},methods:{onClickedAddClient:function(){console.log("onClickedAddClient()",this),window.x=this},onClickedAddServer:function(){}}},Gt=Xt,Qt=(n("5c0b"),Object(V["a"])(Gt,l,c,!1,null,null,null));Qt.options.__file="App.vue";var Zt=Qt.exports,en=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ui grid center aligned"},[e._m(0),e._m(1),n("div",{staticClass:"row"},[n("div",{staticClass:"ten wide column left aligned"},[n("div",{staticClass:"issue"},[e._v("\n                Default, sane config can be bootstrapped with a single command (must be run from "),n("span",{staticClass:"important"},[e._v("root")]),e._v(" account):\n                "),n("div",{staticClass:"example"},[e._v("\n                    # "+e._s(e.bootstrapSh)),n("br")]),e._v("\n                If you want to perform manual configuration, please follow the guide below. Don't forget\n                that "),n("span",{staticClass:"important"},[e._v("you need to restart the server")]),e._v(" to reload updated config.\n                "),n("span",{staticClass:"shell"},[e._v("bootstrap.sh")]),e._v(" will do it for you."),n("br"),n("br"),n("p",{staticClass:"note"},[e._v("\n                    For all below examples,\n                    "),n("span",{staticClass:"shell"},[e._v("${ROOT}")]),e._v(" equals to "),n("span",{staticClass:"shell"},[e._v(e._s(e.deploymentDir))]),e._v(",\n                    where the app is currently deployed.\n                ")])]),n("div",{staticClass:"issue"},[e.hasSettingsFile?n("div",[e._m(2),e._m(3)]):n("div",[e._m(4),e._m(5)])]),n("div",{staticClass:"issue"},[e.isEmailConfigured?n("div",[e._m(6),e.isEmailEnabled?n("p",[e._v("E-mail is "),n("span",{staticClass:"green bold"},[e._v("enabled")]),e._v(" and configured.")]):n("p",[e._v("E-mail is "),n("span",{staticClass:"red bold"},[e._v("disabled.")]),e._v(" You won't receive error logs nor you can send config files.")])]):n("div",[e._m(7),e._m(8)])]),n("div",{staticClass:"issue"},[e.isConfigured?n("div",[e._m(9),n("p",[e._v("Settings file is reviewed and accepted.")])]):n("div",[e._m(10),e._m(11)])]),n("div",{staticClass:"issue"},[e.isDatabaseInitialized?n("div",[e._m(12),n("p",[e._v("\n                        Database is initialized and up-to-date.\n                    ")])]):n("div",[e._m(13),e._m(14)])]),n("div",{staticClass:"issue"},[e.hasAdminUser?n("div",[e._m(15),n("p",[e._v("\n                        Admin user is configured, has properly set password and is activated.\n                    ")])]):n("div",[e._m(16),e._m(17)])])])])])},tn=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row center aligned"},[n("h1",[e._v("Welcome to OpenVPN@Home")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row center aligned"},[n("h3",[e._v("The app requires some configuration")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h2",[n("i",{staticClass:"green circular inverted check icon",attrs:{"aria-hidden":"true"}}),e._v(" Has settings file")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[e._v("\n                        Configuration file "),n("span",{staticClass:"shell"},[e._v("settings.json")]),e._v(" is present in th deployment directory.\n                    ")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h2",[n("i",{staticClass:"red circular inverted times icon",attrs:{"aria-hidden":"true"}}),e._v(" No settings file yet")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v("\n                      OpenVPN@Home is configured through a JSON "),n("span",{staticClass:"shell"},[e._v("settings.json")]),e._v(" file placed in deployment\n                      directory. File can be generated with a management command:\n                      "),n("p",{staticClass:"example"},[e._v("\n                        # ${ROOT}/backend/manage.py configure"),n("br"),e._v("\n                        cat settings.json\n                      ")]),e._v("\n                      You can also check "),n("span",{staticClass:"shell"},[e._v("./manage.py configure --help")]),e._v(" for details.\n                    ")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h2",[n("i",{staticClass:"green circular inverted check icon",attrs:{"aria-hidden":"true"}}),e._v(" E-mail configured")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h2",[n("i",{staticClass:"red circular inverted times icon",attrs:{"aria-hidden":"true"}}),e._v(" You must configure e-mail")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v("\n                        E-mail is "),n("span",{staticClass:"green bold"},[e._v("enabled")]),e._v(" but not fully configured yet. If you don't want to use\n                        e-mail, set "),n("span",{staticClass:"shell"},[e._v("enabled")]),e._v(" to "),n("span",{staticClass:"shell"},[e._v("false")]),e._v(" and you can skip the configuration.\n                        Open "),n("span",{staticClass:"shell"},[e._v("settings.json")]),e._v(" and fill email related fields:\n                        "),n("div",{staticClass:"example"},[e._v("\n                            {"),n("br"),e._v("  ..."),n("br"),e._v('\n                                  "email": {'),n("br"),e._v('\n                                    "enabled": '),n("i",[e._v("true / false")]),e._v(","),n("br"),e._v('\n                                    "server_from": '),n("i",[e._v("e-mail showing in From:")]),e._v(","),n("br"),e._v('\n                                    "admin_emails": '),n("i",[e._v("[list of e-mails to send crash logs to]")]),n("br"),e._v('\n                                    "smtp": {'),n("br"),e._v('\n                                      "server": '),n("i",[e._v('"your.smtp.host"')]),e._v(","),n("br"),e._v('\n                                      "port": '),n("i",[e._v("TLS port")]),e._v(","),n("br"),e._v('\n                                      "user": '),n("i",[e._v("most likely your e-mail address")]),e._v(","),n("br"),e._v('\n                                      "password": '),n("i",[e._v("password")]),e._v(","),n("br"),e._v("\n                                    }"),n("br"),e._v("\n                              ..."),n("br"),e._v("}\n                        ")]),e._v("\n                        Your "),n("span",{staticClass:"shell"},[e._v("server_from")]),e._v(" should be set to a valid e-mail address. Many SMTP servers\n                        will refuse to send e-mail with bogus "),n("i",[e._v("From")]),e._v(" field. "),n("span",{staticClass:"important"},[e._v("You must restart the service to pick up new configuration.")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h2",[n("i",{staticClass:"green circular inverted check icon",attrs:{"aria-hidden":"true"}}),e._v(" Settings reviewed and accepted")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h2",[n("i",{staticClass:"red circular inverted times icon",attrs:{"aria-hidden":"true"}}),e._v(" You must review and accept settings first")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v("\n                        Settings file must be reviewed and accepted before proceeding. Open "),n("span",{staticClass:"shell"},[e._v("settings.json")]),e._v(" in\n                        your favorite editor and set "),n("span",{staticClass:"shell"},[e._v("configured")]),e._v(" flag to "),n("span",{staticClass:"shell"},[e._v("true")]),e._v(".\n                        Most interesting part is your "),n("span",{staticClass:"shell"},[e._v("database")]),e._v(" field.\n                        "),n("div",{staticClass:"example"},[e._v("\n                        {"),n("br"),e._v("  ..."),n("br"),e._v('  "configured": "true"'),n("br"),e._v('  "database": {...}'),n("br"),e._v("\n                      ..."),n("br"),e._v("}\n                        ")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h2",[n("i",{staticClass:"green circular inverted check icon",attrs:{"aria-hidden":"true"}}),e._v(" Database is ready")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h2",[n("i",{staticClass:"red circular inverted times icon",attrs:{"aria-hidden":"true"}}),e._v(" Database is not initialized (migrated) yet")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v("\n                        Database must be initialized (migrated) before the app is usable. Use standard Django migration utility.\n                        "),n("div",{staticClass:"example"},[e._v("\n                            # ${ROOT}/backend/manage.py migrate\n                        ")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h2",[n("i",{staticClass:"green circular inverted check icon",attrs:{"aria-hidden":"true"}}),e._v(" Admin user is configured")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h2",[n("i",{staticClass:"red circular inverted times icon",attrs:{"aria-hidden":"true"}}),e._v(" Admin user is not configured yet")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v("\n                        Admin user is a must. You want to use your real e-mail address and sane password for this one.\n                        "),n("div",{staticClass:"example"},[e._v("\n                            # ${ROOT}/backend/manage.py set_admin my@email.com my-secret-password\n                        ")])])}],nn={computed:{hasSettingsFile:function(){return this.$store.state.status.appNotReady.has_settings_file},isConfigured:function(){return this.$store.state.status.appNotReady.is_configured&&this.hasSettingsFile},isDatabaseInitialized:function(){return this.$store.state.status.appNotReady.is_migrated},managePy:function(){return this.$store.state.status.appNotReady.manage_py},bootstrapSh:function(){return this.$store.state.status.appNotReady.bootstrap_sh},deploymentDir:function(){return this.$store.state.status.appNotReady.deployment_dir},hasAdminUser:function(){return this.$store.state.status.appNotReady.has_active_admin},isEmailConfigured:function(){return this.$store.state.status.appNotReady.is_email_configured},isEmailEnabled:function(){return this.$store.state.status.appNotReady.is_email_enabled}}},sn=nn,an=(n("29d9"),Object(V["a"])(sn,en,tn,!1,null,"de67a84a",null));an.options.__file="AppNotReady.vue";var rn=an.exports,on=n("92d5"),ln=n.n(on);a["default"].config.productionTip=!1,a["default"].use(Dt),a["default"].use(o.a),a["default"].use(ln.a),zt.state.status.appNotReady?new a["default"]({store:zt,render:function(e){return e(rn)}}).$mount("#app"):new a["default"]({router:Yt,store:zt,render:function(e){return e(Zt)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var i=n("5e27"),s=n.n(i);s.a},"5c4a":function(e,t,n){"use strict";var i=n("3114"),s=n.n(i);s.a},"5e27":function(e,t,n){},6353:function(e,t,n){},"6c11":function(e,t,n){"use strict";var i=n("2b23"),s=n.n(i);s.a},8086:function(e,t,n){},"97c0":function(e,t,n){},a9e7:function(e,t,n){},ab93:function(e,t,n){"use strict";var i=n("fd25"),s=n.n(i);s.a},b007:function(e,t,n){"use strict";var i=n("e43a"),s=n.n(i);s.a},b3ec:function(e,t,n){},bcc9:function(e,t,n){},c8be:function(e,t,n){"use strict";var i=n("97c0"),s=n.n(i);s.a},d6db:function(e,t,n){"use strict";var i=n("a9e7"),s=n.n(i);s.a},e07e:function(e,t,n){},e43a:function(e,t,n){},edb5:function(e,t,n){"use strict";var i=n("2152"),s=n.n(i);s.a},fd25:function(e,t,n){},fd74:function(e,t,n){}});
//# sourceMappingURL=app.js.map