(function(e){function t(t){for(var n,r,o=t[0],l=t[1],c=t[2],d=0,v=[];d<o.length;d++)r=o[d],s[r]&&v.push(s[r][0]),s[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(v.length)v.shift()();return a.push.apply(a,c||[]),i()}function i(){for(var e,t=0;t<a.length;t++){for(var i=a[t],n=!0,o=1;o<i.length;o++){var l=i[o];0!==s[l]&&(n=!1)}n&&(a.splice(t--,1),e=r(r.s=i[0]))}return e}var n={},s={app:0},a=[];function r(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=n,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;a.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"080f":function(e,t,i){"use strict";var n=i("2b25"),s=i.n(n);s.a},"0aee":function(e,t,i){"use strict";var n=i("835b"),s=i.n(n);s.a},1771:function(e,t,i){},"205b":function(e,t,i){"use strict";var n=i("1771"),s=i.n(n);s.a},2152:function(e,t,i){},"21bb":function(e,t,i){"use strict";var n=i("bcc9"),s=i.n(n);s.a},"29d9":function(e,t,i){"use strict";var n=i("6353"),s=i.n(n);s.a},"2b25":function(e,t,i){},"2cfd":function(e,t,i){"use strict";var n=i("e07e"),s=i.n(n);s.a},3114:function(e,t,i){},"345c":function(e,t,i){},4678:function(e,t,i){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(e){var t=a(e);return i(t)}function a(e){var t=n[e];if(!(t+1)){var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}return t}s.keys=function(){return Object.keys(n)},s.resolve=a,e.exports=s,s.id="4678"},"4dca":function(e,t,i){},"56d7":function(e,t,i){"use strict";i.r(t);i("cadf"),i("551c"),i("097d"),i("1157"),i("c86c"),i("87ee");var n,s,a=i("2b0e"),r=i("1dce"),o=i.n(r),l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[e.$route.meta.noNavbar?e._e():i("NavigationBar",{on:{addClient:e.onClickedAddClient,addServer:e.onClickedAddServer}}),i("div",{staticClass:"ui container"},[i("router-view")],1)],1)},c=[],u=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("nav",{staticClass:"ui top fixed menu"},[i("div",{staticClass:"ui container"},[i("router-link",{staticClass:"item",attrs:{"active-class":"active",to:"/",exact:""}},[e._v("Home")]),e.isSuperuser?i("router-link",{staticClass:"item",attrs:{"active-class":"active",to:"/settings",exact:""}},[e._v("Settings")]):e._e(),e.isSuperuser?i("a",{staticClass:"item",attrs:{href:"/admin/"}},[e._v("Admin")]):e._e(),i("div",{staticClass:"right menu"},[e.canAddClient?i("div",{staticClass:"ui item"},[i("div",{staticClass:"ui primary button compact add-button",on:{click:e.onClickedAddClient}},[e._v("Add client")])]):e._e(),e.canAddServer?i("div",{staticClass:"ui item"},[i("div",{staticClass:"ui primary button compact",on:{click:e.onClickedAddServer}},[e._v("Add server")])]):e._e(),i("div",{staticClass:"ui item"},[i("span",{class:{superuser:e.isSuperuser}},[i("b",[e._v(e._s(e.email))])])]),i("div",{staticClass:"ui item no-padding-right"},[i("div",{staticClass:"ui primary button compact negative",on:{click:e.onClickedLogout}},[e._v("Logout")])])])],1)])},d=[],v=(i("7f7f"),i("d4ec")),m=i("bee2"),f=i("99de"),p=i("7e84"),h=i("262e"),g=i("60a3"),b=i("8c4f"),_=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",[i("div",{staticClass:"info"},[i("sui-message",{attrs:{info:""}},[e._v("\n                Your SSH deployment key is located in "),i("span",{staticClass:"shell"},[e._v("${INSTALL_DIR}/ssh/openvpnathome_server_deployment_key.pub")]),e._v("."),i("br"),e._v("\n                Make sure you upload the public key to your target deployment server.\n            ")])],1),e.isSuperuser?i("ConfigList",{attrs:{title:"OpenVPN Servers",items:e.servers,emailEnabled:e.emailEnabled,deploymentEnabled:!0}}):e._e(),i("ConfigList",{attrs:{title:"OpenVPN Clients",items:e.clients,emailEnabled:e.emailEnabled,deploymentEnabled:!0}}),i("NewServerDialog",{ref:"newServerDialog"}),i("NewClientDialog",{ref:"newClientDialog"}),i("DeploymentDialog",{ref:"deploymentDialog"})],1)])},C=[],j=i("257e"),y=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"config-table"},[i("table",{staticClass:"ui celled striped table"},[i("col",{attrs:{width:"25%"}}),i("col",{attrs:{width:"20%"}}),i("col",{attrs:{width:"20%"}}),i("col",{attrs:{width:"20%"}}),i("col",{attrs:{width:"5%"}}),e.emailEnabled?i("col",{attrs:{width:"5%"}}):e._e(),e.deploymentEnabled?i("col",{attrs:{width:"5%"}}):e._e(),i("thead",[i("tr",[i("th",[e._v(e._s(e.title))]),i("th",[e._v("Created")]),i("th",[e._v("Expires")]),i("th",[e._v("E-Mail")]),e._m(0),e.emailEnabled?i("th",{staticClass:"center"},[i("i",{staticClass:"icon mail",attrs:{"aria-hidden":"true"}})]):e._e(),e.deploymentEnabled?i("th",{staticClass:"center"},[i("i",{staticClass:"icon play",attrs:{"aria-hidden":"true"}})]):e._e()])]),i("tbody",e._l(e.items,function(t){return i("ConfigListItem",{key:t.id,attrs:{item:t,emailEnabled:e.emailEnabled,deploymentEnabled:e.deploymentEnabled}})}))])])},k=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("th",{staticClass:"center"},[i("i",{staticClass:"icon download",attrs:{"aria-hidden":"true"}})])}],w=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("tr",[i("td",[e._v(e._s(e.item.name))]),i("td",[e._v(e._s(e.relativeCreated))]),i("td",[e._v(e._s(e.relativeValid))]),i("td",[e._v(e._s(e.item.email))]),i("td",{staticClass:"center"},[i("span",[i("a",{attrs:{href:e.item.download_url}},[i("i",{staticClass:"icon download",attrs:{"aria-hidden":"true"}})])])]),e.emailEnabled?i("td",{staticClass:"center"},[e.canSendEmail?i("span",[e.isSending?e._e():i("a",{attrs:{href:e.item.download_url},on:{click:function(t){return t.preventDefault(),e.sendMail(t)}}},[i("i",{staticClass:"icon mail",attrs:{"aria-hidden":"true"}})]),e.isSending?i("div",{staticClass:"ui active inline tiny loader"}):e._e()]):i("span",[i("i",{staticClass:"icon ban",attrs:{"aria-hidden":"true"}})])]):e._e(),e.deploymentEnabled?i("td",{staticClass:"center"},[e.canDeploy?i("span",[i("span",{staticClass:"play-button",on:{click:function(t){return t.preventDefault(),e.deploy(t)}}},[i("i",{staticClass:"icon play",attrs:{"aria-hidden":"true"}})])]):i("span",[i("i",{staticClass:"icon ban",attrs:{"aria-hidden":"true"}})])]):e._e()])},O=[],$=i("c1df"),S=i.n($),E=i("2ef0"),x=i.n(E),N="clicked_add_client",A="clicked_add_server",D="clicked_deploy_server",P=(n=Object(g["a"])({name:"ConfigListItem",props:["item","emailEnabled","deploymentEnabled"]}),n(s=function(e){function t(){return Object(v["a"])(this,t),Object(f["a"])(this,Object(p["a"])(t).apply(this,arguments))}return Object(h["a"])(t,e),Object(m["a"])(t,[{key:"sendMail",value:function(){console.log("ConfigListItem.sendMail()",this.item),this.$store.dispatch("sendClientConfigEmail",this.item.id)}},{key:"deploy",value:function(){this.$root.$emit(D,this.item)}},{key:"relativeCreated",get:function(){return S()(this.item.created).fromNow()}},{key:"relativeValid",get:function(){return S()(this.item.validity_end).fromNow()}},{key:"isSending",get:function(){return this.$store.getters.isSendingClientConfigEmail(this.item.id)}},{key:"canSendEmail",get:function(){return this.$store.getters.canSendEmail(this.item.email)}},{key:"canDeploy",get:function(){return x.a.has(this.item,"network")}}]),t}(g["b"]))||s),R=P,q=(i("205b"),i("2877")),F=Object(q["a"])(R,w,O,!1,null,"1094e1e2",null);F.options.__file="ConfigListItem.vue";var L,V,z=F.exports,M=(L=Object(g["a"])({name:"ConfigList",props:["items","title","emailEnabled","deploymentEnabled"],components:{ConfigListItem:z}}),L(V=function(e){function t(){return Object(v["a"])(this,t),Object(f["a"])(this,Object(p["a"])(t).apply(this,arguments))}return Object(h["a"])(t,e),t}(g["b"]))||V),T=M,U=(i("080f"),Object(q["a"])(T,y,k,!1,null,"4549aabc",null));U.options.__file="ConfigList.vue";var I=U.exports,H=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("sui-modal",{attrs:{closable:!1},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[i("sui-modal-header",[e._v("New OpenVPN Server")]),i("sui-modal-content",[i("sui-container",[e.open?i("NewServerForm",{ref:"form",on:{formUpdated:e.onFormUpdated}}):e._e()],1)],1),i("sui-modal-actions",[i("sui-button",{attrs:{floated:"right",compact:"",positive:"",disabled:!e.isValid},on:{click:e.onAccept}},[e._v("OK")]),i("sui-button",{attrs:{floated:"right",compact:"",negative:""},on:{click:e.onReject}},[e._v("Cancel")])],1)],1)],1)},Y=[],J=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"ui form"},[i("div",{staticClass:"field"},[i("label",[e._v("Server Name")]),i("div",{staticClass:"ui left icon input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.form.name,expression:"form.name"}],attrs:{placeholder:"Ex. 'My Home Server'",type:"text"},domProps:{value:e.form.name},on:{input:function(t){t.target.composing||e.$set(e.form,"name",t.target.value)}}}),i("i",{staticClass:"server icon",attrs:{"aria-hidden":"true"}})])]),i("div",{staticClass:"fields"},[i("div",{staticClass:"twelve wide field"},[i("label",[e._v("Server Host Address")]),i("div",{staticClass:"ui left icon input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.form.hostname,expression:"form.hostname"}],attrs:{placeholder:"Ex. myvpn.net or 192.168.1.1",type:"text"},domProps:{value:e.form.hostname},on:{input:function(t){t.target.composing||e.$set(e.form,"hostname",t.target.value)}}}),i("i",{staticClass:"server icon",attrs:{"aria-hidden":"true"}})])]),i("div",{staticClass:"four wide field"},[i("label",[e._v("Port")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.form.port,expression:"form.port"}],attrs:{min:"1",max:"65535",type:"number"},domProps:{value:e.form.port},on:{input:function(t){t.target.composing||e.$set(e.form,"port",t.target.value)}}})])]),i("div",{staticClass:"field"},[i("label",[e._v("Transport Protocol")]),i("select",{directives:[{name:"model",rawName:"v-model",value:e.form.protocol,expression:"form.protocol"}],on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.form,"protocol",t.target.multiple?i:i[0])}}},[i("option",{attrs:{value:"udp"}},[e._v("UDP")]),i("option",{attrs:{value:"tcp"}},[e._v("TCP")])])]),i("div",{staticClass:"field"},[i("label",[e._v("Internal VPN network (private IP range, CIDR notation)")]),i("div",{staticClass:"ui left icon input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.form.network,expression:"form.network"}],attrs:{placeholder:"Ex. 172.30.0.0/16",type:"text"},domProps:{value:e.form.network},on:{input:function(t){t.target.composing||e.$set(e.form,"network",t.target.value)}}}),i("i",{staticClass:"server icon",attrs:{"aria-hidden":"true"}})])])])},B=[],K=i("be94"),W=i("b5ae"),X={name:"NewServerForm",data:function(){return{open:!1,form:{name:"",hostname:"",port:1194,protocol:"udp",network:"172.30.0.0/16"}}},validations:{form:{name:{required:W["required"]},hostname:{required:W["required"]},port:{required:W["required"]},protocol:{required:W["required"]},network:{required:W["required"]}}},computed:{isValid:function(){return!this.$v.$invalid},value:function(){return Object(K["a"])({},this.form)}},mounted:function(){var e=this;this.$emit("formUpdated",this.isValid),this.$watch("isValid",function(){e.$emit("formUpdated",e.isValid)})}},G=X,Q=(i("5c4a"),Object(q["a"])(G,J,B,!1,null,"67650fbd",null));Q.options.__file="NewServerForm.vue";var Z,ee,te=Q.exports,ie=(Z=Object(g["a"])({components:{NewServerForm:te},data:function(){return{open:!1,isValid:!1}}}),Z(ee=function(e){function t(){return Object(v["a"])(this,t),Object(f["a"])(this,Object(p["a"])(t).apply(this,arguments))}return Object(h["a"])(t,e),Object(m["a"])(t,[{key:"toggle",value:function(){this.open=!0}},{key:"onFormUpdated",value:function(e){console.log("NewServerDialog.onFormReadyChanged()",e),this.isValid=e}},{key:"onAccept",value:function(){this.$store.dispatch("addServer",this.$refs.form.value),this.open=!1}},{key:"onReject",value:function(){console.log("onReject()"),this.open=!1}}]),t}(g["b"]))||ee),ne=ie,se=(i("edb5"),Object(q["a"])(ne,H,Y,!1,null,"19ce6608",null));se.options.__file="NewServerDialog.vue";var ae=se.exports,re=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("sui-modal",{attrs:{closable:!1},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[i("sui-modal-header",[e._v("New OpenVPN Client")]),i("sui-modal-content",[i("sui-container",[e.open?i("NewClientForm",{ref:"form",on:{formUpdated:e.onFormUpdated}}):e._e()],1)],1),i("sui-modal-actions",[i("sui-button",{attrs:{floated:"right",compact:"",positive:"",disabled:!e.isValid},on:{click:e.onAccept}},[e._v("OK")]),i("sui-button",{attrs:{floated:"right",compact:"",negative:""},on:{click:e.onReject}},[e._v("Cancel")])],1)],1)],1)},oe=[],le=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"ui form"},[i("div",{staticClass:"field"},[i("label",[e._v("Client Name")]),i("div",{staticClass:"ui left icon input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.form.name,expression:"form.name"}],attrs:{placeholder:"Ex. 'My Home Server'",type:"text"},domProps:{value:e.form.name},on:{input:function(t){t.target.composing||e.$set(e.form,"name",t.target.value)}}}),i("i",{staticClass:"server icon",attrs:{"aria-hidden":"true"}})])])])},ce=[],ue={name:"NewClientForm",data:function(){return{open:!1,form:{name:""}}},validations:{form:{name:{required:W["required"]}}},computed:{isValid:function(){return!this.$v.$invalid},value:function(){return Object(K["a"])({},this.form)}},mounted:function(){var e=this;this.$emit("formUpdated",this.isValid),this.$watch("isValid",function(){e.$emit("formUpdated",e.isValid)})}},de=ue,ve=(i("671f"),Object(q["a"])(de,le,ce,!1,null,"dee5f604",null));ve.options.__file="NewClientForm.vue";var me,fe,pe=ve.exports,he=(me=Object(g["a"])({components:{NewClientForm:pe},data:function(){return{open:!1,isValid:!1}}}),me(fe=function(e){function t(){return Object(v["a"])(this,t),Object(f["a"])(this,Object(p["a"])(t).apply(this,arguments))}return Object(h["a"])(t,e),Object(m["a"])(t,[{key:"toggle",value:function(){this.open=!0}},{key:"onFormUpdated",value:function(e){this.isValid=e}},{key:"onAccept",value:function(){this.$store.dispatch("addClient",this.$refs.form.value),this.open=!1}},{key:"onReject",value:function(){this.open=!1}}]),t}(g["b"]))||fe),ge=he,be=(i("d28d"),Object(q["a"])(ge,re,oe,!1,null,"5e75b771",null));be.options.__file="NewClientDialog.vue";var _e,Ce,je=be.exports,ye=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("sui-modal",{attrs:{closable:!1},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[i("sui-modal-header",[e._v("Deploy OpenVPN server")]),i("sui-modal-content",{attrs:{scrolling:""}},[i("sui-container",[i("div",{staticClass:"output"},e._l(e.output,function(t,n){return i("div",{key:n},[e._v(e._s(t))])}))])],1),i("sui-modal-actions",[i("sui-button",{attrs:{floated:"right",compact:"",positive:"",loading:e.isRunning,disabled:e.isRunning},on:{click:e.onDeploy}},[e._v("Deploy")]),e.finished?i("sui-button",{attrs:{floated:"right",compact:"",negative:""},on:{click:e.onReject}},[e._v("Close")]):i("sui-button",{attrs:{floated:"right",compact:"",negative:""},on:{click:e.onReject}},[e._v("Cancel")])],1)],1)],1)},ke=[],we=i("2909"),Oe=function(e){return new WebSocket(e)},$e=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe;Object(v["a"])(this,e),this.output=[],this.createSocket=t,this.socket=null,this.onStart=null,this.onOutput=null,this.onFinish=null}return Object(m["a"])(e,[{key:"connect",value:function(e){if(null!=this.socket)throw Error("Already connected");this.socket=this.createSocket(e),this.socket.onopen=this._onOpen.bind(this),this.socket.onmessage=this._onMessage.bind(this),this.socket.onclose=this._onClose.bind(this),this.socket.onerror=this._onError.bind(this)}},{key:"close",value:function(){this.socket&&this.socket.close()}},{key:"_onOpen",value:function(){this._sendJson({cmd:"start"})}},{key:"_onMessage",value:function(e){var t=JSON.parse(e.data);"running"===t.status&&t.output&&this.onOutput?this.onOutput(t.output):"start"===t.status&&this.onStart?this.onStart():"finish"===t.status&&this.onFinish?this.onFinish():console.log("_onMessage(): unknown message",t)}},{key:"_onClose",value:function(){}},{key:"_onError",value:function(){}},{key:"_sendJson",value:function(e){var t=JSON.stringify(e);this.socket.send(t)}}]),e}(),Se=(_e=Object(g["a"])({data:function(){return{isRunning:!1,finished:!1,open:!1,output:[]}}}),_e(Ce=function(e){function t(){return Object(v["a"])(this,t),Object(f["a"])(this,Object(p["a"])(t).apply(this,arguments))}return Object(h["a"])(t,e),Object(m["a"])(t,[{key:"show",value:function(e){this.isRunning=!1,this.output=[],this.process=null,this.server=e,this.open=!0}},{key:"onDeploy",value:function(){this.process=new $e,this.process.onStart=this.onStart,this.process.onFinish=this.onFinish,this.process.onOutput=this.onOutput,this.process.connect("ws://".concat(window.location.host,"/ws/")),this.isRunning=!0,this.finished=!1}},{key:"onReject",value:function(){this.open=!1,this.process&&this.process.close()}},{key:"onStart",value:function(){console.log("onStart()"),this.output.push("Deployment started","Ignore first '[ERROR]:' line - this is harmless Ansible bug. :o)")}},{key:"onFinish",value:function(){console.log("onStop()"),this.output.push("Deployment finished."),this.isRunning=!1,this.finished=!0}},{key:"onOutput",value:function(e){var t;(t=this.output).push.apply(t,Object(we["a"])(e))}}]),t}(g["b"]))||Ce),Ee=Se,xe=(i("cbde"),Object(q["a"])(Ee,ye,ke,!1,null,"623de90e",null));xe.options.__file="DeploymentDialog.vue";var Ne,Ae,De=xe.exports,Pe=(Ne=Object(g["a"])({name:"Home",components:{NavigationBar:Mt,ConfigList:I,NewServerDialog:ae,NewClientDialog:je,DeploymentDialog:De}}),Ne(Ae=function(e){function t(){var e;return Object(v["a"])(this,t),e=Object(f["a"])(this,Object(p["a"])(t).call(this)),e.onClickedAddClient=e.onClickedAddClient.bind(Object(j["a"])(Object(j["a"])(e))),e.onClickedAddServer=e.onClickedAddServer.bind(Object(j["a"])(Object(j["a"])(e))),e.onClickedDeployServer=e.onClickedDeployServer.bind(Object(j["a"])(Object(j["a"])(e))),e}return Object(h["a"])(t,e),Object(m["a"])(t,[{key:"onClickedAddClient",value:function(){this.$refs.newClientDialog.open=!0}},{key:"onClickedAddServer",value:function(){this.$refs.newServerDialog.open=!0}},{key:"onClickedDeployServer",value:function(e){this.$refs.deploymentDialog.show(e)}},{key:"mounted",value:function(){this.$root.$on(N,this.onClickedAddClient),this.$root.$on(A,this.onClickedAddServer),this.$root.$on(D,this.onClickedDeployServer)}},{key:"beforeDestroy",value:function(){this.$root.$off(N,this.onClickedAddClient),this.$root.$off(A,this.onClickedAddServer),this.$root.$off(D,this.onClickedDeployServer)}},{key:"servers",get:function(){return this.$store.state.servers}},{key:"clients",get:function(){return this.$store.state.clients}},{key:"isSuperuser",get:function(){return this.$store.getters.isSuperuser}},{key:"emailEnabled",get:function(){return this.$store.state.settings.email_enabled}}]),t}(g["b"]))||Ae),Re=Pe,qe=(i("21bb"),Object(q["a"])(Re,_,C,!1,null,null,null));qe.options.__file="Home.vue";var Fe,Le,Ve=qe.exports,ze=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"settings"},[i("div",{staticClass:"ui container text",staticStyle:{margin:"16px"}},[i("form",{staticClass:"ui form",on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[i("div",{staticClass:"ui fluid card"},[i("div",{staticClass:"content"},[i("div",{staticClass:"field"},[i("div",{staticClass:"ui checked checkbox"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.settings.email_enabled,expression:"settings.email_enabled"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.settings.email_enabled)?e._i(e.settings.email_enabled,null)>-1:e.settings.email_enabled},on:{change:function(t){var i=e.settings.email_enabled,n=t.target,s=!!n.checked;if(Array.isArray(i)){var a=null,r=e._i(i,a);n.checked?r<0&&e.$set(e.settings,"email_enabled",i.concat([a])):r>-1&&e.$set(e.settings,"email_enabled",i.slice(0,r).concat(i.slice(r+1)))}else e.$set(e.settings,"email_enabled",s)}}}),i("label",[e._v("Enable e-mail")])])]),e.settings.email_enabled?i("div",[i("div",{staticClass:"field"},[i("label",[e._v("From e-mail")]),i("div",{staticClass:"ui left icon input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.settings.email_from,expression:"settings.email_from"}],key:"email_from",attrs:{placeholder:"From for automated e-mails sent by this system",type:"text"},domProps:{value:e.settings.email_from},on:{input:function(t){t.target.composing||e.$set(e.settings,"email_from",t.target.value)}}}),i("i",{staticClass:"user icon",attrs:{"aria-hidden":"true"}})])]),i("div",{staticClass:"fields"},[i("div",{staticClass:"twelve wide field"},[i("label",[e._v("SMTP server (only with TLS support)")]),i("div",{staticClass:"ui left icon input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.settings.email_smtp_server,expression:"settings.email_smtp_server"}],attrs:{placeholder:"Outgoing SMTP server",type:"text"},domProps:{value:e.settings.email_smtp_server},on:{input:function(t){t.target.composing||e.$set(e.settings,"email_smtp_server",t.target.value)}}}),i("i",{staticClass:"server icon",attrs:{"aria-hidden":"true"}})])]),i("div",{staticClass:"four wide field"},[i("label",[e._v("Port")]),i("div",{staticClass:"ui left icon input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.settings.email_smtp_port,expression:"settings.email_smtp_port"}],attrs:{placeholder:"Outgoing SMTP server port",min:"1",max:"65535",type:"number"},domProps:{value:e.settings.email_smtp_port},on:{input:function(t){t.target.composing||e.$set(e.settings,"email_smtp_port",t.target.value)}}}),i("i",{staticClass:"lock icon",attrs:{"aria-hidden":"true"}})])])]),i("div",{staticClass:"field"},[i("label",[e._v("SMTP login")]),i("div",{staticClass:"ui left icon input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.settings.email_smtp_login,expression:"settings.email_smtp_login"}],attrs:{placeholder:"Outgoing SMTP server login (e-mail address)",type:"text"},domProps:{value:e.settings.email_smtp_login},on:{input:function(t){t.target.composing||e.$set(e.settings,"email_smtp_login",t.target.value)}}}),i("i",{staticClass:"user icon",attrs:{"aria-hidden":"true"}})])]),i("div",{staticClass:"field"},[i("label",[e._v("SMTP password")]),i("div",{staticClass:"ui left icon input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.settings.email_smtp_password,expression:"settings.email_smtp_password"}],attrs:{placeholder:"SMTP password is stored in database in plaintext",type:"password"},domProps:{value:e.settings.email_smtp_password},on:{input:function(t){t.target.composing||e.$set(e.settings,"email_smtp_password",t.target.value)}}}),i("i",{staticClass:"lock icon",attrs:{"aria-hidden":"true"}})])])]):e._e()])]),i("div",{staticClass:"ui fluid card"},[i("div",{staticClass:"content"},[i("div",{staticClass:"field"},[i("div",{staticClass:"ui checkbox"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.settings.registration_enabled,expression:"settings.registration_enabled"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.settings.registration_enabled)?e._i(e.settings.registration_enabled,null)>-1:e.settings.registration_enabled},on:{change:function(t){var i=e.settings.registration_enabled,n=t.target,s=!!n.checked;if(Array.isArray(i)){var a=null,r=e._i(i,a);n.checked?r<0&&e.$set(e.settings,"registration_enabled",i.concat([a])):r>-1&&e.$set(e.settings,"registration_enabled",i.slice(0,r).concat(i.slice(r+1)))}else e.$set(e.settings,"registration_enabled",s)}}}),i("label",[e._v("New users registration")])])])])]),i("button",{staticClass:"ui button",attrs:{type:"submit",role:"button",disabled:!e.isValid},on:{submit:function(e){}}},[e._v("Submit")]),"error"===e.status?i("span",{staticClass:"ui red header"},[i("i",{staticClass:"times icon",attrs:{"aria-hidden":"true"}}),e._v(" Update failed")]):e._e(),"success"===e.status?i("span",{staticClass:"ui green header"},[i("i",{staticClass:"check icon",attrs:{"aria-hidden":"true"}}),e._v(" Settings updated")]):e._e()])])])},Me=[],Te=i("ade3"),Ue=(i("f751"),Fe=Object(g["a"])({name:"Settings",components:{NavigationBar:Mt},validations:function(){var e={registration_enabled:{required:W["required"]}};return this.settings.email_enabled&&Object.assign(e,{email_from:{required:W["required"],email:W["email"]},email_smtp_server:{required:W["required"]},email_smtp_port:{required:W["required"]},email_smtp_login:{required:W["required"]},email_smtp_password:{required:W["required"]}}),{settings:e}}}),Fe(Le=function(e){function t(){var e,i;Object(v["a"])(this,t);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return i=Object(f["a"])(this,(e=Object(p["a"])(t)).call.apply(e,[this].concat(s))),Object(Te["a"])(Object(j["a"])(Object(j["a"])(i)),"settings",{email_enabled:!1,email_from:"",email_smtp_server:"",email_smtp_port:465,email_smtp_login:"",email_smtp_password:"",registration_enabled:!1}),Object(Te["a"])(Object(j["a"])(Object(j["a"])(i)),"status",null),i}return Object(h["a"])(t,e),Object(m["a"])(t,[{key:"handleSubmit",value:function(){this.$store.dispatch("setSettings",this.settings)}},{key:"onSuccess",value:function(){this.status="success"}},{key:"onError",value:function(){this.status="error"}},{key:"mounted",value:function(){this.settings=x.a.cloneDeep(this.$store.state.settings)}},{key:"isValid",get:function(){return!this.$v.$invalid}}]),t}(g["b"]))||Le),Ie=Ue,He=(i("0aee"),Object(q["a"])(Ie,ze,Me,!1,null,"0239a2a6",null));He.options.__file="Settings.vue";var Ye,Je,Be=He.exports,Ke=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"login top-space"},[i("div",{staticClass:"ui grid center aligned"},[e._m(0),i("div",{staticClass:"row"},[i("div",{staticClass:"six wide column left aligned"},[i("form",{staticClass:"ui form",on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[i("div",{staticClass:"field"},[i("label",[e._v("Login E-mail")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.login,expression:"login"}],attrs:{type:"email",name:"login",placeholder:"E-mail"},domProps:{value:e.login},on:{input:function(t){t.target.composing||(e.login=t.target.value)}}})]),i("div",{staticClass:"field"},[i("label",{},[e._v("Password")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",name:"password",placeholder:"Password (min 8 chars)"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),i("button",{staticClass:"ui button",attrs:{disabled:e.invalid}},[e._v("Login")])])])]),e.canRegister?i("div",{staticClass:"row center aligned"},[i("router-link",{attrs:{to:"/register"}},[e._v("Register")])],1):e._e(),e.error?i("div",{staticClass:"row center aligned"},[e._v("\n            Login failed\n        ")]):e._e()])])},We=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row center aligned"},[i("h1",{staticClass:"ui header green center aligned"},[e._v("Login"),i("br"),e._v("OpenVPN@Home")])])}],Xe=(Ye=Object(g["a"])({components:{},validations:{login:{required:W["required"]},password:{required:W["required"],minLength:Object(W["minLength"])(8)}}}),Ye(Je=function(e){function t(){var e,i;Object(v["a"])(this,t);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return i=Object(f["a"])(this,(e=Object(p["a"])(t)).call.apply(e,[this].concat(s))),Object(Te["a"])(Object(j["a"])(Object(j["a"])(i)),"login",""),Object(Te["a"])(Object(j["a"])(Object(j["a"])(i)),"password",""),Object(Te["a"])(Object(j["a"])(Object(j["a"])(i)),"error",!1),i}return Object(h["a"])(t,e),Object(m["a"])(t,[{key:"handleSubmit",value:function(){var e=this;this.$api.login(this.login,this.password,function(){e.$store.commit("login"),e.$store.dispatch("hydrate"),e.$router.push("/")},function(){e.error=!0})}},{key:"invalid",get:function(){return this.$v.$invalid}},{key:"canRegister",get:function(){return this.$store.getters.canRegister}}]),t}(g["b"]))||Je),Ge=Xe,Qe=(i("d6db"),Object(q["a"])(Ge,Ke,We,!1,null,null,null));Qe.options.__file="Login.vue";var Ze,et,tt=Qe.exports,it=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"login top-space"},[i("div",{staticClass:"ui grid center aligned"},[e._m(0),i("div",{staticClass:"row"},[i("div",{staticClass:"six wide column left aligned"},[i("form",{staticClass:"ui form",on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[i("div",{staticClass:"field"},[i("label",[e._v("Registration E-mail")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.login,expression:"login"}],attrs:{type:"email",name:"login",placeholder:"E-mail"},domProps:{value:e.login},on:{input:function(t){t.target.composing||(e.login=t.target.value)}}})]),i("div",{staticClass:"field"},[i("label",{},[e._v("Password")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",name:"password",placeholder:"Password (min 8 chars)"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),i("button",{staticClass:"ui button",attrs:{disabled:e.invalid}},[e._v("Register")])])])]),i("div",{staticClass:"row center aligned"},[i("router-link",{attrs:{to:"/login"}},[e._v("Login")])],1),e.error?i("div",{staticClass:"row center aligned"},[e._v("\n            Registration failed\n        ")]):e._e()])])},nt=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row center aligned"},[i("h1",{staticClass:"ui header green center aligned"},[e._v("Register"),i("br"),e._v("OpenVPN@Home")])])}],st=(Ze=Object(g["a"])({components:{},validations:{login:{required:W["required"],email:W["email"]},password:{required:W["required"],minLength:Object(W["minLength"])(8)}}}),Ze(et=function(e){function t(){var e,i;Object(v["a"])(this,t);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return i=Object(f["a"])(this,(e=Object(p["a"])(t)).call.apply(e,[this].concat(s))),Object(Te["a"])(Object(j["a"])(Object(j["a"])(i)),"login",""),Object(Te["a"])(Object(j["a"])(Object(j["a"])(i)),"password",""),Object(Te["a"])(Object(j["a"])(Object(j["a"])(i)),"error",!1),i}return Object(h["a"])(t,e),Object(m["a"])(t,[{key:"handleSubmit",value:function(){var e=this;this.$api.register(this.login,this.password,function(){e.$store.commit("login"),e.$store.dispatch("hydrate"),e.$router.push("/")},function(){e.error=!0})}},{key:"invalid",get:function(){return this.$v.$invalid}}]),t}(g["b"]))||et),at=st,rt=(i("2cfd"),Object(q["a"])(at,it,nt,!1,null,null,null));rt.options.__file="Register.vue";var ot=rt.exports,lt=(i("6762"),i("2fdb"),i("2f62")),ct=i("bc3a"),ut=i.n(ct),dt=i("a78e"),vt=i.n(dt),mt="/api/accounts/login/",ft="/api/accounts/register/",pt="/api/accounts/user/",ht="/api/accounts/logout/",gt="/api/openvpn/servers/",bt="/api/openvpn/clients/",_t="/api/management/settings/",Ct=function(){function e(){Object(v["a"])(this,e)}return Object(m["a"])(e,[{key:"login",value:function(e,t,i,n){this.client().post(mt,{email:e,password:t}).then(function(e){i()},function(e){n()})}},{key:"register",value:function(e,t,i,n){this.client().post(ft,{email:e,password:t}).then(function(e){i()},function(e){n()})}},{key:"logout",value:function(e){this.client().get(ht).then(function(t){e()})}},{key:"getUser",value:function(e,t){this.client().get(pt).then(function(t){return e(t.data)},function(e){return t()})}},{key:"getServers",value:function(e,t){this.client().get(gt).then(function(t){e(t.data)},function(e){t()})}},{key:"addServer",value:function(e,t,i){this.client().post(gt,e).then(function(e){return t(e.data)},function(e){return i()})}},{key:"getClients",value:function(e,t){this.client().get(bt).then(function(t){e(t.data)},function(e){t()})}},{key:"addClient",value:function(e,t,i){this.client().post(bt,e).then(function(e){return t(e.data)},function(e){return i()})}},{key:"getSettings",value:function(e,t){this.client().get(_t).then(function(t){e(t.data)},function(e){t()})}},{key:"setSettings",value:function(e,t,i){this.client().patch(_t,e).then(function(e){t()},function(e){i()})}},{key:"sendClientConfig",value:function(e,t,i){var n="/api/openvpn/clients/".concat(e,"/send/");this.client().post(n,{}).then(function(i){return t(e)},function(t){return i(e)})}},{key:"client",value:function(){var e=vt.a.get("csrftoken");return ut.a.create({headers:{"X-CSRFToken":e}})}}]),e}();function jt(e){e.prototype.$api=new Ct(Et)}a["default"].use(lt["a"]);var yt=new Ct,kt={user:{authenticated:window.django.authenticated,email:"",permissions:[],superuser:!1},servers:[],clients:[],status:{sendingClientConfigEmail:[],sendingServerConfigEmail:[],appNotReady:window.django.app_not_ready},settings:{email_enabled:window.django.email_enabled,registration_enabled:window.django.registration_enabled}},wt={canRegister:function(e){return e.settings.registration_enabled},hasServer:function(e){return e.servers.length>0},isAuthenticated:function(e){return e.user.authenticated},isSuperuser:function(e){return e.user.superuser},hasPermission:function(e){return function(t){return x.a.includes(e.user.permissions,t)}},isSendingClientConfigEmail:function(e){return function(t){return x.a.includes(e.status.sendingClientConfigEmail,t)}},email:function(e){return e.user.email},canSendEmail:function(e){var t=e.settings,i=e.user;return function(e){return t.email_enabled&&(e===i.email||i.superuser)}}},Ot={login:function(e){e.user.authenticated=!0},logout:function(e){var t=x.a.cloneDeep(kt);x.a.assign(e,t)},loginError:function(e){e.auth.error="Error"},setUser:function(e,t){e.user.email=t.email,e.user.permissions=t.permissions,e.user.superuser=x.a.includes(t.permissions,"superuser")},setServers:function(e,t){e.servers=t},addServer:function(e,t){e.servers.push(t)},setClients:function(e,t){e.clients=t},addClient:function(e,t){e.clients.push(t)},setSendingClientConfigEmail:function(e,t){e.status.sendingClientConfigEmail.push(t)},clearSendingClientConfigEmail:function(e,t){e.status.sendingClientConfigEmail=x.a.filter(e.status.sendingClientConfigEmail,function(e){return e!==t})},setSettings:function(e,t){e.settings=t}},$t={hydrate:function(e){var t=e.dispatch;t("getSettings"),t("getUser"),t("getServers"),t("getClients")},getUser:function(e){var t=e.commit;yt.getUser(function(e){return t("setUser",e)},function(e){})},getServers:function(e){var t=e.commit;yt.getServers(function(e){return t("setServers",e)},function(e){})},getClients:function(e){var t=e.commit;yt.getClients(function(e){return t("setClients",e)},function(e){})},addServer:function(e,t){var i=e.commit;yt.addServer(t,function(e){return i("addServer",e)},function(e){})},addClient:function(e,t){var i=e.commit;yt.addClient(t,function(e){return i("addClient",e)},function(e){})},sendClientConfigEmail:function(e,t){var i=e.commit;i("setSendingClientConfigEmail",t),yt.sendClientConfig(t,function(e){return i("clearSendingClientConfigEmail",e)},function(e){return i("clearSendingClientConfigEmail",e)})},setSettings:function(e,t){var i=e.commit;yt.setSettings(t,function(e){return i("setSettings",t)},function(e){})},getSettings:function(e){var t=e.commit;yt.getSettings(function(e){return t("setSettings",e)},function(){})}},St=new lt["a"].Store({state:x.a.cloneDeep(kt),getters:wt,mutations:Ot,actions:$t}),Et=St;a["default"].use(b["a"]);var xt="login",Nt="register",At="home",Dt="settings",Pt=new b["a"]({routes:[{path:"/",name:At,component:Ve},{path:"/login",name:xt,component:tt,meta:{isPublic:!0,noNavbar:!0}},{path:"/register",name:Nt,component:ot,meta:{isPublic:!0,noNavbar:!0}},{path:"/settings",name:Dt,component:Be}]});Pt.beforeEach(function(e,t,i){var n=!Et.getters.isAuthenticated&&!e.meta.isPublic;n?i({path:"/login"}):i()});var Rt,qt,Ft=Pt,Lt=(Rt=Object(g["a"])({name:"NavigationBar",components:{}}),Rt(qt=function(e){function t(){return Object(v["a"])(this,t),Object(f["a"])(this,Object(p["a"])(t).apply(this,arguments))}return Object(h["a"])(t,e),Object(m["a"])(t,[{key:"onClickedLogout",value:function(){this.$api.logout(this.onLogoutCompleted.bind(this))}},{key:"onClickedAddClient",value:function(){this.$root.$emit(N)}},{key:"onClickedAddServer",value:function(){this.$root.$emit(A)}},{key:"onLogoutCompleted",value:function(){this.$store.commit("logout"),this.$router.push({path:"/login"})}},{key:"canAddServer",get:function(){return this.$route.name===At&&!this.$store.getters.hasServer}},{key:"canAddClient",get:function(){return this.$route.name===At&&this.$store.getters.hasServer}},{key:"isSuperuser",get:function(){return this.$store.getters.isSuperuser}},{key:"email",get:function(){return this.$store.state.user.email}}]),t}(g["b"]))||qt),Vt=Lt,zt=(i("aee9"),Object(q["a"])(Vt,u,d,!1,null,"5b6c2c1a",null));zt.options.__file="NavigationBar.vue";var Mt=zt.exports,Tt={components:{NavigationBar:Mt},created:function(){this.$store.getters.isAuthenticated&&this.$store.dispatch("hydrate")},methods:{onClickedAddClient:function(){console.log("onClickedAddClient()",this),window.x=this},onClickedAddServer:function(){}}},Ut=Tt,It=(i("5c0b"),Object(q["a"])(Ut,l,c,!1,null,null,null));It.options.__file="App.vue";var Ht=It.exports,Yt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"ui grid center aligned"},[e._m(0),e._m(1),i("div",{staticClass:"row"},[i("div",{staticClass:"ten wide column left aligned"},[i("div",{staticClass:"issue"},[e._v("\n                Default, sane config can be bootstrapped with a single command (must be run from "),i("span",{staticClass:"important"},[e._v("root")]),e._v(" account):\n                "),i("div",{staticClass:"example"},[e._v("\n                    # "+e._s(e.bootstrapSh)),i("br")]),e._v("\n                If you want to perform manual configuration, please follow the guide below. Don't forget\n                that "),i("span",{staticClass:"important"},[e._v("you need to restart the server")]),e._v(" to reload updated config.\n                "),i("span",{staticClass:"shell"},[e._v("bootstrap.sh")]),e._v(" will do it for you."),i("br"),i("br"),i("p",{staticClass:"note"},[e._v("\n                    For all below examples,\n                    "),i("span",{staticClass:"shell"},[e._v("${ROOT}")]),e._v(" equals to "),i("span",{staticClass:"shell"},[e._v(e._s(e.deploymentDir))]),e._v(",\n                    where the app is currently deployed.\n                ")])]),i("div",{staticClass:"issue"},[e.hasSettingsFile?i("div",[e._m(2),e._m(3)]):i("div",[e._m(4),e._m(5)])]),i("div",{staticClass:"issue"},[e.isEmailConfigured?i("div",[e._m(6),e.isEmailEnabled?i("p",[e._v("E-mail is "),i("span",{staticClass:"green bold"},[e._v("enabled")]),e._v(" and configured.")]):i("p",[e._v("E-mail is "),i("span",{staticClass:"red bold"},[e._v("disabled.")]),e._v(" You won't receive error logs nor you can send config files.")])]):i("div",[e._m(7),e._m(8)])]),i("div",{staticClass:"issue"},[e.isConfigured?i("div",[e._m(9),i("p",[e._v("Settings file is reviewed and accepted.")])]):i("div",[e._m(10),e._m(11)])]),i("div",{staticClass:"issue"},[e.isDatabaseInitialized?i("div",[e._m(12),i("p",[e._v("\n                        Database is initialized and up-to-date.\n                    ")])]):i("div",[e._m(13),e._m(14)])]),i("div",{staticClass:"issue"},[e.hasAdminUser?i("div",[e._m(15),i("p",[e._v("\n                        Admin user is configured, has properly set password and is activated.\n                    ")])]):i("div",[e._m(16),e._m(17)])])])])])},Jt=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row center aligned"},[i("h1",[e._v("Welcome to OpenVPN@Home")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row center aligned"},[i("h3",[e._v("The app requires some configuration")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("h2",[i("i",{staticClass:"green circular inverted check icon",attrs:{"aria-hidden":"true"}}),e._v(" Has settings file")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("p",[e._v("\n                        Configuration file "),i("span",{staticClass:"shell"},[e._v("settings.json")]),e._v(" is present in th deployment directory.\n                    ")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("h2",[i("i",{staticClass:"red circular inverted times icon",attrs:{"aria-hidden":"true"}}),e._v(" No settings file yet")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e._v("\n                      OpenVPN@Home is configured through a JSON "),i("span",{staticClass:"shell"},[e._v("settings.json")]),e._v(" file placed in deployment\n                      directory. File can be generated with a management command:\n                      "),i("p",{staticClass:"example"},[e._v("\n                        # ${ROOT}/backend/manage.py configure"),i("br"),e._v("\n                        cat settings.json\n                      ")]),e._v("\n                      You can also check "),i("span",{staticClass:"shell"},[e._v("./manage.py configure --help")]),e._v(" for details.\n                    ")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("h2",[i("i",{staticClass:"green circular inverted check icon",attrs:{"aria-hidden":"true"}}),e._v(" E-mail configured")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("h2",[i("i",{staticClass:"red circular inverted times icon",attrs:{"aria-hidden":"true"}}),e._v(" You must configure e-mail")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e._v("\n                        E-mail is "),i("span",{staticClass:"green bold"},[e._v("enabled")]),e._v(" but not fully configured yet. If you don't want to use\n                        e-mail, set "),i("span",{staticClass:"shell"},[e._v("enabled")]),e._v(" to "),i("span",{staticClass:"shell"},[e._v("false")]),e._v(" and you can skip the configuration.\n                        Open "),i("span",{staticClass:"shell"},[e._v("settings.json")]),e._v(" and fill email related fields:\n                        "),i("div",{staticClass:"example"},[e._v("\n                            {"),i("br"),e._v("  ..."),i("br"),e._v('\n                                  "email": {'),i("br"),e._v('\n                                    "enabled": '),i("i",[e._v("true / false")]),e._v(","),i("br"),e._v('\n                                    "server_from": '),i("i",[e._v("e-mail showing in From:")]),e._v(","),i("br"),e._v('\n                                    "admin_emails": '),i("i",[e._v("[list of e-mails to send crash logs to]")]),i("br"),e._v('\n                                    "smtp": {'),i("br"),e._v('\n                                      "server": '),i("i",[e._v('"your.smtp.host"')]),e._v(","),i("br"),e._v('\n                                      "port": '),i("i",[e._v("TLS port")]),e._v(","),i("br"),e._v('\n                                      "user": '),i("i",[e._v("most likely your e-mail address")]),e._v(","),i("br"),e._v('\n                                      "password": '),i("i",[e._v("password")]),e._v(","),i("br"),e._v("\n                                    }"),i("br"),e._v("\n                              ..."),i("br"),e._v("}\n                        ")]),e._v("\n                        Your "),i("span",{staticClass:"shell"},[e._v("server_from")]),e._v(" should be set to a valid e-mail address. Many SMTP servers\n                        will refuse to send e-mail with bogus "),i("i",[e._v("From")]),e._v(" field. "),i("span",{staticClass:"important"},[e._v("You must restart the service to pick up new configuration.")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("h2",[i("i",{staticClass:"green circular inverted check icon",attrs:{"aria-hidden":"true"}}),e._v(" Settings reviewed and accepted")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("h2",[i("i",{staticClass:"red circular inverted times icon",attrs:{"aria-hidden":"true"}}),e._v(" You must review and accept settings first")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e._v("\n                        Settings file must be reviewed and accepted before proceeding. Open "),i("span",{staticClass:"shell"},[e._v("settings.json")]),e._v(" in\n                        your favorite editor and set "),i("span",{staticClass:"shell"},[e._v("configured")]),e._v(" flag to "),i("span",{staticClass:"shell"},[e._v("true")]),e._v(".\n                        Most interesting part is your "),i("span",{staticClass:"shell"},[e._v("database")]),e._v(" field.\n                        "),i("div",{staticClass:"example"},[e._v("\n                        {"),i("br"),e._v("  ..."),i("br"),e._v('  "configured": "true"'),i("br"),e._v('  "database": {...}'),i("br"),e._v("\n                      ..."),i("br"),e._v("}\n                        ")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("h2",[i("i",{staticClass:"green circular inverted check icon",attrs:{"aria-hidden":"true"}}),e._v(" Database is ready")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("h2",[i("i",{staticClass:"red circular inverted times icon",attrs:{"aria-hidden":"true"}}),e._v(" Database is not initialized (migrated) yet")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e._v("\n                        Database must be initialized (migrated) before the app is usable. Use standard Django migration utility.\n                        "),i("div",{staticClass:"example"},[e._v("\n                            # ${ROOT}/backend/manage.py migrate\n                        ")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("h2",[i("i",{staticClass:"green circular inverted check icon",attrs:{"aria-hidden":"true"}}),e._v(" Admin user is configured")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("h2",[i("i",{staticClass:"red circular inverted times icon",attrs:{"aria-hidden":"true"}}),e._v(" Admin user is not configured yet")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e._v("\n                        Admin user is a must. You want to use your real e-mail address and sane password for this one.\n                        "),i("div",{staticClass:"example"},[e._v("\n                            # ${ROOT}/backend/manage.py set_admin my@email.com my-secret-password\n                        ")])])}],Bt={computed:{hasSettingsFile:function(){return this.$store.state.status.appNotReady.has_settings_file},isConfigured:function(){return this.$store.state.status.appNotReady.is_configured&&this.hasSettingsFile},isDatabaseInitialized:function(){return this.$store.state.status.appNotReady.is_migrated},managePy:function(){return this.$store.state.status.appNotReady.manage_py},bootstrapSh:function(){return this.$store.state.status.appNotReady.bootstrap_sh},deploymentDir:function(){return this.$store.state.status.appNotReady.deployment_dir},hasAdminUser:function(){return this.$store.state.status.appNotReady.has_active_admin},isEmailConfigured:function(){return this.$store.state.status.appNotReady.is_email_configured},isEmailEnabled:function(){return this.$store.state.status.appNotReady.is_email_enabled}}},Kt=Bt,Wt=(i("29d9"),Object(q["a"])(Kt,Yt,Jt,!1,null,"de67a84a",null));Wt.options.__file="AppNotReady.vue";var Xt=Wt.exports,Gt=i("92d5"),Qt=i.n(Gt);a["default"].config.productionTip=!1,a["default"].use(jt),a["default"].use(o.a),a["default"].use(Qt.a),Et.state.status.appNotReady?new a["default"]({store:Et,render:function(e){return e(Xt)}}).$mount("#app"):new a["default"]({router:Ft,store:Et,render:function(e){return e(Ht)}}).$mount("#app")},"5c0b":function(e,t,i){"use strict";var n=i("5e27"),s=i.n(n);s.a},"5c4a":function(e,t,i){"use strict";var n=i("3114"),s=i.n(n);s.a},"5e27":function(e,t,i){},6353:function(e,t,i){},"671f":function(e,t,i){"use strict";var n=i("4dca"),s=i.n(n);s.a},"835b":function(e,t,i){},"8beb":function(e,t,i){},a9e7:function(e,t,i){},aee9:function(e,t,i){"use strict";var n=i("345c"),s=i.n(n);s.a},bcc9:function(e,t,i){},c4f1:function(e,t,i){},cbde:function(e,t,i){"use strict";var n=i("8beb"),s=i.n(n);s.a},d28d:function(e,t,i){"use strict";var n=i("c4f1"),s=i.n(n);s.a},d6db:function(e,t,i){"use strict";var n=i("a9e7"),s=i.n(n);s.a},e07e:function(e,t,i){},edb5:function(e,t,i){"use strict";var n=i("2152"),s=i.n(n);s.a}});
//# sourceMappingURL=app.js.map